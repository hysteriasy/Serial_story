<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="format-detection" content="telephone=no">
  <title>ä½œå“ä¸Šä¼  - æ¡‘æ¢“</title>
  <meta name="description" content="æ¡‘æ¢“ä¸ªäººåˆ›ä½œå¹³å° - ä¸Šä¼ å’Œç®¡ç†æ‚¨çš„æ–‡å­¦ã€è‰ºæœ¯ã€éŸ³ä¹ã€è§†é¢‘ä½œå“">
  <link rel="stylesheet" href="css/style.css?v=20240807">
  <link rel="stylesheet" href="css/ios-compatibility.css?v=20240810">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <style>
    /* ä¸Šä¼ é¡µé¢ä¸“ç”¨æ ·å¼ - ä¸ä¸»é¡µé£æ ¼ä¿æŒä¸€è‡´ */
    body {
      padding-top: 70px; /* ä¸ºå›ºå®šå¯¼èˆªæ ç•™å‡ºç©ºé—´ */
    }

    .upload-hero {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 80px 0;
      text-align: center;
      margin-bottom: 0;
    }

    .hero-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .hero-title {
      font-size: 3rem;
      margin-bottom: 1rem;
      font-weight: 700;
    }

    .hero-description {
      font-size: 1.2rem;
      margin-bottom: 2rem;
      opacity: 0.9;
    }

    .user-info {
      background: rgba(255,255,255,0.95);
      padding: 20px;
      border-radius: 12px;
      margin: 30px auto;
      max-width: 1200px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      border-left: 4px solid #007bff;
    }

    .current-user {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #333;
    }

    .auth-required {
      text-align: center;
      padding: 60px 40px;
      background: rgba(255,255,255,0.95);
      border-radius: 12px;
      margin: 30px auto;
      max-width: 500px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .auth-required h3 {
      color: #333;
      margin-bottom: 15px;
    }

    .login-form {
      max-width: 300px;
      margin: 20px auto;
    }

    .login-form input {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 16px;
    }

    .upload-section {
      background: rgba(255,255,255,0.95);
      border-radius: 12px;
      padding: 40px;
      margin: 30px auto;
      max-width: 1200px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .section-title {
      font-size: 2rem;
      color: #333;
      text-align: center;
      margin-bottom: 30px;
    }

    .file-type-selector {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 30px 0;
      flex-wrap: wrap;
    }

    .file-type-selector .btn {
      padding: 12px 24px;
      border: 2px solid #007bff;
      background: transparent;
      color: #007bff;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .file-type-selector .btn.active,
    .file-type-selector .btn:hover {
      background: #007bff;
      color: white;
    }

    .drop-zone {
      border: 2px dashed #007bff;
      border-radius: 12px;
      padding: 60px 40px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: #f8f9fa;
      margin: 30px 0;
    }

    .drop-zone:hover, .drop-zone.dragover {
      border-color: #0056b3;
      background: #e3f2fd;
      transform: translateY(-2px);
    }

    .drop-zone-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }

    .drop-zone-icon {
      font-size: 48px;
      color: #007bff;
    }

    .drop-zone-text p {
      margin: 5px 0;
      font-size: 18px;
      color: #333;
    }

    .drop-zone-hint {
      font-size: 14px;
      color: #6c757d;
    }

    .upload-progress {
      margin: 20px 0;
      background: #e9ecef;
      border-radius: 10px;
      overflow: hidden;
      height: 25px;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #007bff, #0056b3);
      width: 0%;
      transition: width 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 14px;
      font-weight: 600;
    }

    .upload-info {
      background: #e7f3ff;
      padding: 25px;
      border-radius: 12px;
      margin: 30px 0;
    }

    .upload-info h4 {
      margin-top: 0;
      color: #0056b3;
      font-size: 1.2rem;
    }

    .upload-info ul {
      margin: 15px 0;
      padding-left: 25px;
    }

    .upload-info li {
      margin: 8px 0;
      color: #495057;
      line-height: 1.6;
    }

    .file-list-container {
      margin-top: 40px;
      padding-top: 40px;
      border-top: 2px solid #dee2e6;
    }

    .file-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 25px;
      margin-top: 25px;
    }

    .file-item {
      background: white;
      border: 1px solid #dee2e6;
      border-radius: 12px;
      padding: 20px;
      transition: all 0.3s ease;
    }

    .file-item:hover {
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      transform: translateY(-2px);
    }

    .file-icon {
      font-size: 28px;
      margin-bottom: 12px;
    }

    .file-name {
      font-weight: 600;
      margin-bottom: 8px;
      word-break: break-word;
      color: #333;
    }

    .file-meta {
      font-size: 0.9em;
      color: #6c757d;
      margin-bottom: 15px;
    }

    .file-meta span {
      margin-right: 15px;
    }

    .file-actions {
      display: flex;
      gap: 10px;
    }

    .btn-sm {
      padding: 8px 16px;
      font-size: 0.875em;
      border-radius: 6px;
    }

    .no-files {
      text-align: center;
      color: #6c757d;
      font-style: italic;
      padding: 60px;
      font-size: 1.1rem;
    }



    /* å­˜å‚¨å¾½ç« æ ·å¼ */
    .storage-badge {
      font-size: 16px;
      padding: 4px 8px;
      border-radius: 4px;
      font-weight: bold;
      display: inline-block;
      min-width: 24px;
      text-align: center;
    }

    .storage-firebase {
      background-color: #e3f2fd;
      color: #1976d2;
      border: 1px solid #bbdefb;
    }

    .storage-local {
      background-color: #fff3e0;
      color: #f57c00;
      border: 1px solid #ffcc02;
    }

    .storage-preset {
      background-color: #f3e5f5;
      color: #7b1fa2;
      border: 1px solid #ce93d8;
    }

    /* é€šçŸ¥åŠ¨ç”» */
    @keyframes slideInRight {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes slideOutRight {
      from {
        transform: translateX(0);
        opacity: 1;
      }
      to {
        transform: translateX(100%);
        opacity: 0;
      }
    }

    /* æ¨¡æ€æ¡†æ ·å¼ */
    .modal {
      position: fixed;
      z-index: 10002;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* UIç»„ä»¶å±‚çº§å®šä¹‰ */
    /*
    å±‚çº§è§„åˆ’ï¼š
    - å¯¼èˆªæ : 10000 (æœ€é«˜ï¼Œå§‹ç»ˆåœ¨é¡¶éƒ¨)
    - é€šçŸ¥æ¶ˆæ¯: 10001 (åœ¨å¯¼èˆªæ ä¹‹ä¸Š)
    - æ¨¡æ€æ¡†: 10002 (åœ¨é€šçŸ¥ä¹‹ä¸Š)
    - å…¶ä»–æµ®åŠ¨å…ƒç´ : 1000ä»¥ä¸‹
    */

    .modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 12px;
      width: 90%;
      max-width: 500px;
      position: relative;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    }

    .close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      color: #aaa;
      transition: color 0.3s ease;
    }

    .close-btn:hover {
      color: #333;
    }

    .modal h3 {
      margin-top: 0;
      margin-bottom: 20px;
      color: #333;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #333;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 16px;
      box-sizing: border-box;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
    }

    .form-actions {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
      margin-top: 25px;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
      text-align: center;
    }

    .btn-primary {
      background-color: #007bff;
      color: white;
    }

    .btn-primary:hover {
      background-color: #0056b3;
    }

    .btn-secondary {
      background-color: #6c757d;
      color: white;
    }

    .btn-secondary:hover {
      background-color: #545b62;
    }

    .btn-danger {
      background-color: #dc3545;
      color: white;
    }

    .btn-danger:hover {
      background-color: #c82333;
    }

    .form-control {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 16px;
      box-sizing: border-box;
    }

    .form-control:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
    }

    .form-control.error {
      border-color: #dc3545;
      box-shadow: 0 0 0 2px rgba(220,53,69,0.25);
    }

    .form-error {
      color: #dc3545;
      font-size: 14px;
      margin-top: 5px;
      display: block;
      min-height: 20px;
    }

    .form-success {
      color: #28a745;
      font-size: 14px;
      margin-top: 5px;
      display: block;
    }

    /* æ–°å¢è¡¨å•æ ·å¼ */
    .upload-form {
      background: white;
      border-radius: 12px;
      padding: 30px;
      margin: 20px 0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      border: 1px solid #e9ecef;
      display: none;
    }

    .upload-form.active {
      display: block;
    }

    .subcategory-fields {
      margin-top: 20px;
    }

    .required {
      color: #dc3545;
      font-weight: bold;
    }

    .file-upload-area {
      position: relative;
    }

    .file-upload-hint {
      font-size: 0.875rem;
      color: #6c757d;
      margin-top: 5px;
    }

    .form-actions {
      display: flex;
      gap: 15px;
      justify-content: flex-end;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #e9ecef;
    }

    .form-actions .btn {
      min-width: 120px;
    }

    /* æ–‡å­¦ä½œå“å­åˆ†ç±»åˆ‡æ¢åŠ¨ç”» */
    .subcategory-fields {
      transition: all 0.3s ease;
    }

    /* é¡µè„šä¸‹æ‹‰èœå•æ ·å¼ */
    .works-dropdown {
      position: relative;
      display: inline-block;
    }

    .dropdown-trigger {
      color: #ffffff;
      text-decoration: none;
      cursor: pointer;
      padding: 5px 10px;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }

    .dropdown-trigger:hover {
      background-color: rgba(0, 123, 255, 0.1);
    }

    .dropdown-menu {
      position: absolute;
      bottom: 100%;
      left: 0;
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      min-width: 180px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(10px);
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .works-dropdown:hover .dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .dropdown-menu a {
      display: block;
      padding: 12px 16px;
      color: #333;
      text-decoration: none;
      border-bottom: 1px solid #f0f0f0;
      transition: background-color 0.3s ease;
    }

    .dropdown-menu a:last-child {
      border-bottom: none;
    }

    .dropdown-menu a:hover {
      background-color: #f8f9fa;
    }

    .dropdown-menu a.current-page {
      background-color: #007bff;
      color: white;
      font-weight: 500;
    }

    .dropdown-menu a.current-page:hover {
      background-color: #0056b3;
    }

    /* æ–‡ä»¶ä¸Šä¼ åŒºåŸŸæ ·å¼ä¼˜åŒ– */
    .file-upload-area input[type="file"] {
      padding: 15px;
      border: 2px dashed #dee2e6;
      border-radius: 8px;
      background: #f8f9fa;
      transition: all 0.3s ease;
    }

    .file-upload-area input[type="file"]:hover {
      border-color: #007bff;
      background: #e3f2fd;
    }

    .file-upload-area input[type="file"]:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 0 3px rgba(0,123,255,0.25);
    }

    /* è¡¨å•éªŒè¯æ ·å¼ */
    .form-control.is-invalid {
      border-color: #dc3545;
      box-shadow: 0 0 0 2px rgba(220,53,69,0.25);
    }

    .form-control.is-valid {
      border-color: #28a745;
      box-shadow: 0 0 0 2px rgba(40,167,69,0.25);
    }

    .invalid-feedback {
      display: block;
      width: 100%;
      margin-top: 5px;
      font-size: 0.875rem;
      color: #dc3545;
    }

    .valid-feedback {
      display: block;
      width: 100%;
      margin-top: 5px;
      font-size: 0.875rem;
      color: #28a745;
    }

    /* æƒé™è®¾ç½®æ ·å¼ */
    .permission-preview {
      background: #e7f3ff;
      border: 1px solid #b3d9ff;
      border-radius: 6px;
      padding: 10px;
      margin-top: 10px;
      font-size: 0.9em;
    }

    .permission-preview h5 {
      margin: 0 0 8px 0;
      color: #0056b3;
      font-size: 1em;
    }

    .permission-preview ul {
      margin: 5px 0;
      padding-left: 20px;
    }

    .permission-preview li {
      margin: 3px 0;
    }

    .custom-permissions-container {
      border: 1px solid #dee2e6;
      border-radius: 6px;
      padding: 15px;
      margin-top: 10px;
      background: #f8f9fa;
    }

    .permission-radio-group {
      display: flex;
      gap: 20px;
      margin-bottom: 15px;
    }

    .permission-radio-group label {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      font-weight: normal;
    }

    .permission-radio-group input[type="radio"] {
      margin: 0;
    }

    .github-status {
      padding: 10px;
      border-radius: 6px;
      margin-top: 10px;
    }

    .github-status.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .github-status.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .github-status.info {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      .hero-title {
        font-size: 2rem;
      }

      .hero-description {
        font-size: 1rem;
      }

      .upload-section,
      .user-info {
        margin: 20px;
        padding: 20px;
      }

      .upload-form {
        padding: 20px;
        margin: 15px 0;
      }

      .file-type-selector {
        flex-direction: column;
        align-items: center;
      }

      .current-user {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }



      .modal-content {
        width: 95%;
        margin: 20px;
        padding: 20px;
      }

      .form-actions {
        flex-direction: column;
      }

      .form-actions .btn {
        min-width: auto;
        width: 100%;
      }

      /* ç§»åŠ¨è®¾å¤‡ä¸Šçš„é€šçŸ¥ä½ç½®è°ƒæ•´ */
      .notification {
        top: 70px !important;
        right: 10px !important;
        left: 10px !important;
        max-width: none !important;
        margin: 0 !important;
      }

      /* ç§»åŠ¨è®¾å¤‡ä¸Šçš„è¡¨å•é”™è¯¯æç¤º */
      .form-error {
        font-size: 12px;
      }

      /* ç§»åŠ¨è®¾å¤‡ä¸Šçš„ç™»å½•è¡¨å• */
      .login-form {
        padding: 0 10px;
      }
    }

    /* GitHub é…ç½®æç¤ºæ ·å¼ */
    .config-notice {
      background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
      border: 1px solid #2196f3;
      border-radius: 12px;
      padding: 0;
      overflow: hidden;
    }

    .notice-content {
      padding: 20px;
    }

    .config-notice h4 {
      color: #1976d2;
      margin-top: 0;
      margin-bottom: 15px;
      font-weight: 600;
    }

    .config-notice p {
      color: #424242;
      margin-bottom: 15px;
      line-height: 1.6;
    }

    .config-actions {
      margin: 20px 0;
    }

    .config-actions .btn {
      background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
      border: none;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      text-decoration: none;
      display: inline-block;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .config-actions .btn:hover {
      background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
    }

    .config-details {
      background: rgba(255, 255, 255, 0.7);
      padding: 10px 15px;
      border-radius: 6px;
      margin-top: 15px;
    }

    .config-details p {
      margin: 0;
      font-size: 13px;
      color: #666;
    }
  </style>
</head>
<body>
  <!-- å¯¼èˆªæ  -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-logo">
        <h2>æ¡‘æ¢“</h2>
      </div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="index.html" class="nav-link">é¦–é¡µ</a>
        </li>
        <li class="nav-item">
          <a href="index.html#about" class="nav-link">å…³äºæˆ‘</a>
        </li>

        <li class="nav-item">
          <a href="index.html#contact" class="nav-link">è”ç³»æˆ‘</a>
        </li>

      </ul>
      <div class="nav-toggle" id="mobile-menu">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>
    </div>
  </nav>

  <!-- ä¸»æ ‡é¢˜åŒºåŸŸ -->
  <header class="upload-hero">
    <div class="hero-container">
      <h1 class="hero-title">ä½œå“ä¸Šä¼ ä¸­å¿ƒ</h1>
      <p class="hero-description">åˆ†äº«æ‚¨çš„åˆ›ä½œï¼Œè®©æ–‡å­—ä¸è‰ºæœ¯åœ¨è¿™é‡Œç»½æ”¾</p>
    </div>
  </header>

  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <main>
    <!-- ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºåŒºåŸŸ -->
    <div id="userInfoContainer"></div>

    <!-- GitHubé…ç½®æç¤ºåŒºåŸŸ -->
    <section class="upload-section" id="githubConfigSection" style="display: none;">
      <h2 class="section-title">âš™ï¸ GitHubå­˜å‚¨é…ç½®</h2>
      <div class="config-notice">
        <div class="notice-content">
          <h4>ğŸ”— GitHub Token é…ç½®</h4>
          <p>ä¸ºäº†åœ¨ GitHub Pages ç¯å¢ƒä¸‹æ­£å¸¸ä¿å­˜å’ŒåŒæ­¥æ•°æ®ï¼Œéœ€è¦é…ç½® GitHub Personal Access Tokenã€‚</p>
          <p><strong>è¯·å‰å¾€ç®¡ç†å‘˜æ§åˆ¶é¢æ¿è¿›è¡Œé…ç½®ï¼š</strong></p>
          <div class="config-actions">
            <a href="admin.html" class="btn btn-primary">ğŸ”§ å‰å¾€ç®¡ç†å‘˜é¢æ¿é…ç½®</a>
          </div>
          <div class="config-details">
            <p><small>é…ç½®è·¯å¾„ï¼šç®¡ç†å‘˜æ§åˆ¶é¢æ¿ â†’ ç³»ç»Ÿè®¾ç½® â†’ GitHub å­˜å‚¨é…ç½®</small></p>
          </div>
        </div>
      </div>
    </section>

    <!-- ä½œå“ä¸Šä¼ åŒºåŸŸ -->
    <section class="upload-section">
      <h2 class="section-title">ğŸ“¤ ä½œå“ä¸Šä¼ </h2>

      <!-- ä½œå“ç±»å‹é€‰æ‹©å™¨ -->
      <div class="file-type-selector">
        <button class="btn active" data-type="literature">ğŸ“š æ–‡å­¦ä½œå“</button>
        <button class="btn" data-type="art">ğŸ¨ ç»˜ç”»ä½œå“</button>
        <button class="btn" data-type="music">ğŸµ éŸ³ä¹ä½œå“</button>
        <button class="btn" data-type="video">ğŸ¬ è§†é¢‘ä½œå“</button>
      </div>

      <!-- æ–‡å­¦ä½œå“ä¸Šä¼ è¡¨å• -->
      <div id="literatureForm" class="upload-form active">
        <!-- å­åˆ†ç±»é€‰æ‹© -->
        <div class="form-group">
          <label>æ–‡å­¦ä½œå“ç±»å‹</label>
          <select id="literatureSubcategory" class="form-control">
            <option value="essay">ç”Ÿæ´»éšç¬”</option>
            <option value="poetry">è¯—æ­Œåˆ›ä½œ</option>
            <option value="novel">å°è¯´è¿è½½</option>
          </select>
        </div>

        <!-- ç”Ÿæ´»éšç¬”è¡¨å• -->
        <div id="essayFields" class="subcategory-fields">
          <div class="form-group">
            <label>éšç¬”é¢˜ç›® <span class="required">*</span></label>
            <input type="text" id="essayTitle" class="form-control" placeholder="è¯·è¾“å…¥éšç¬”é¢˜ç›®" required>
          </div>
          <div class="form-group">
            <label>éšç¬”å†…å®¹ <span class="required">*</span></label>
            <textarea id="essayContent" class="form-control" rows="10" placeholder="è¯·è¾“å…¥éšç¬”å†…å®¹ï¼Œæ”¯æŒMarkdownæ ¼å¼" required></textarea>
          </div>
        </div>

        <!-- è¯—æ­Œåˆ›ä½œè¡¨å• -->
        <div id="poetryFields" class="subcategory-fields" style="display: none;">
          <div class="form-group">
            <label>è¯—æ­Œé¢˜ç›® <span class="required">*</span></label>
            <input type="text" id="poetryTitle" class="form-control" placeholder="è¯·è¾“å…¥è¯—æ­Œé¢˜ç›®" required>
          </div>
          <div class="form-group">
            <label>è¯—æ­Œç±»å‹</label>
            <select id="poetryType" class="form-control">
              <option value="modern">ç°ä»£è¯—</option>
              <option value="classical">å¤ä½“è¯—è¯</option>
            </select>
          </div>
          <div class="form-group">
            <label>è¯—æ­Œå†…å®¹ <span class="required">*</span></label>
            <textarea id="poetryContent" class="form-control" rows="8" placeholder="è¯·è¾“å…¥è¯—æ­Œå†…å®¹" required></textarea>
          </div>
        </div>

        <!-- å°è¯´è¿è½½è¡¨å• -->
        <div id="novelFields" class="subcategory-fields" style="display: none;">
          <div class="form-group">
            <label>å°è¯´é¢˜ç›® <span class="required">*</span></label>
            <input type="text" id="novelTitle" class="form-control" placeholder="è¯·è¾“å…¥å°è¯´é¢˜ç›®" required>
          </div>
          <div class="form-group">
            <label>ç« èŠ‚å· <span class="required">*</span></label>
            <input type="number" id="novelChapter" class="form-control" placeholder="è¯·è¾“å…¥ç« èŠ‚å·" min="1" required>
          </div>
          <div class="form-group">
            <label>èŠ‚æ ‡é¢˜</label>
            <input type="text" id="novelChapterTitle" class="form-control" placeholder="è¯·è¾“å…¥èŠ‚æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰">
          </div>
          <div class="form-group">
            <label>ç« èŠ‚å†…å®¹ <span class="required">*</span></label>
            <textarea id="novelContent" class="form-control" rows="12" placeholder="è¯·è¾“å…¥ç« èŠ‚å†…å®¹" required></textarea>
          </div>
        </div>

        <!-- é€šç”¨è®¾ç½® -->
        <div class="form-group">
          <label>è®¿é—®æƒé™</label>
          <select id="literaturePermission" class="form-control" onchange="togglePermissionSettings('literature')">
            <option value="public">ğŸŒ å…¬å¼€ï¼ˆæ‰€æœ‰äººå¯è§ï¼‰</option>
            <option value="friend">ğŸ‘¥ ä»…å¥½å‹å¯è§</option>
            <option value="visitor">ğŸ‘¤ è®¿å®¢åŠä»¥ä¸Šå¯è§</option>
            <option value="custom">âš™ï¸ è‡ªå®šä¹‰æƒé™</option>
            <option value="private">ğŸ”’ ç§æœ‰ï¼ˆä»…è‡ªå·±å¯è§ï¼‰</option>
          </select>
        </div>

        <!-- è‡ªå®šä¹‰æƒé™è®¾ç½® -->
        <div id="literatureCustomPermissions" class="form-group" style="display: none;">
          <label>è‡ªå®šä¹‰æƒé™è®¾ç½®</label>
          <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin-bottom: 10px;">
            <div class="form-group">
              <label>
                <input type="radio" name="literaturePermissionType" value="whitelist" checked>
                ç™½åå•æ¨¡å¼ï¼ˆä»…æŒ‡å®šç”¨æˆ·å¯è§ï¼‰
              </label>
            </div>
            <div class="form-group">
              <label>
                <input type="radio" name="literaturePermissionType" value="blacklist">
                é»‘åå•æ¨¡å¼ï¼ˆæŒ‡å®šç”¨æˆ·ä¸å¯è§ï¼‰
              </label>
            </div>
            <div class="form-group">
              <label>æŒ‡å®šç”¨æˆ·ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</label>
              <input type="text" id="literatureUserList" class="form-control" placeholder="ä¾‹å¦‚ï¼šuser1, user2, user3">
            </div>
          </div>
          <div class="permission-preview" id="literaturePermissionPreview"></div>
        </div>

        <div class="form-actions">
          <button type="button" id="submitLiterature" class="btn btn-primary">å‘å¸ƒä½œå“</button>
          <button type="button" id="resetLiterature" class="btn btn-secondary">é‡ç½®è¡¨å•</button>
        </div>
      </div>

      <!-- ç»˜ç”»ä½œå“ä¸Šä¼ è¡¨å• -->
      <div id="artForm" class="upload-form" style="display: none;">
        <div class="form-group">
          <label>ç»˜ç”»ä½œå“ç±»å‹</label>
          <select id="artSubcategory" class="form-control">
            <option value="painting">ç»˜ç”»ä½œå“</option>
            <option value="sketch">ç´ æä½œå“</option>
            <option value="digital">æ•°å­—è‰ºæœ¯</option>
          </select>
        </div>
        <div class="form-group">
          <label>ä½œå“é¢˜ç›® <span class="required">*</span></label>
          <input type="text" id="artTitle" class="form-control" placeholder="è¯·è¾“å…¥ä½œå“é¢˜ç›®" required>
        </div>
        <div class="form-group">
          <label>ä½œå“å›¾ç‰‡ <span class="required">*</span></label>
          <div class="file-upload-area">
            <input type="file" id="artFile" class="form-control" accept="image/*" required>
            <div class="file-upload-hint">æ”¯æŒ JPGã€PNGã€GIFã€WebP æ ¼å¼ï¼Œæœ€å¤§ 10MB</div>
          </div>
        </div>
        <div class="form-group">
          <label>ä½œå“ç®€ä»‹</label>
          <textarea id="artDescription" class="form-control" rows="4" placeholder="è¯·ç®€å•ä»‹ç»ä¸€ä¸‹è¿™å¹…ä½œå“"></textarea>
        </div>
        <div class="form-group">
          <label>è®¿é—®æƒé™</label>
          <select id="artPermission" class="form-control" onchange="togglePermissionSettings('art')">
            <option value="public">ğŸŒ å…¬å¼€ï¼ˆæ‰€æœ‰äººå¯è§ï¼‰</option>
            <option value="friend">ğŸ‘¥ ä»…å¥½å‹å¯è§</option>
            <option value="visitor">ğŸ‘¤ è®¿å®¢åŠä»¥ä¸Šå¯è§</option>
            <option value="custom">âš™ï¸ è‡ªå®šä¹‰æƒé™</option>
            <option value="private">ğŸ”’ ç§æœ‰ï¼ˆä»…è‡ªå·±å¯è§ï¼‰</option>
          </select>
        </div>

        <!-- è‡ªå®šä¹‰æƒé™è®¾ç½® -->
        <div id="artCustomPermissions" class="form-group" style="display: none;">
          <label>è‡ªå®šä¹‰æƒé™è®¾ç½®</label>
          <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin-bottom: 10px;">
            <div class="form-group">
              <label>
                <input type="radio" name="artPermissionType" value="whitelist" checked>
                ç™½åå•æ¨¡å¼ï¼ˆä»…æŒ‡å®šç”¨æˆ·å¯è§ï¼‰
              </label>
            </div>
            <div class="form-group">
              <label>
                <input type="radio" name="artPermissionType" value="blacklist">
                é»‘åå•æ¨¡å¼ï¼ˆæŒ‡å®šç”¨æˆ·ä¸å¯è§ï¼‰
              </label>
            </div>
            <div class="form-group">
              <label>æŒ‡å®šç”¨æˆ·ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</label>
              <input type="text" id="artUserList" class="form-control" placeholder="ä¾‹å¦‚ï¼šuser1, user2, user3">
            </div>
          </div>
          <div class="permission-preview" id="artPermissionPreview"></div>
        </div>
        <div class="form-actions">
          <button type="button" id="submitArt" class="btn btn-primary">å‘å¸ƒä½œå“</button>
          <button type="button" id="resetArt" class="btn btn-secondary">é‡ç½®è¡¨å•</button>
        </div>
      </div>

      <!-- éŸ³ä¹ä½œå“ä¸Šä¼ è¡¨å• -->
      <div id="musicForm" class="upload-form" style="display: none;">
        <div class="form-group">
          <label>éŸ³ä¹ä½œå“ç±»å‹</label>
          <select id="musicSubcategory" class="form-control">
            <option value="original">åŸåˆ›éŸ³ä¹</option>
            <option value="cover">ç¿»å”±ä½œå“</option>
            <option value="instrumental">å™¨ä¹æ¼”å¥</option>
          </select>
        </div>
        <div class="form-group">
          <label>ä½œå“é¢˜ç›® <span class="required">*</span></label>
          <input type="text" id="musicTitle" class="form-control" placeholder="è¯·è¾“å…¥ä½œå“é¢˜ç›®" required>
        </div>
        <div class="form-group">
          <label>éŸ³é¢‘æ–‡ä»¶ <span class="required">*</span></label>
          <div class="file-upload-area">
            <input type="file" id="musicFile" class="form-control" accept="audio/*" required>
            <div class="file-upload-hint">æ”¯æŒ MP3ã€WAVã€FLACã€M4Aã€AAC æ ¼å¼ï¼Œæœ€å¤§ 10MB</div>
          </div>
        </div>
        <div class="form-group">
          <label>ä½œå“ç®€ä»‹ <span class="required">*</span></label>
          <textarea id="musicDescription" class="form-control" rows="4" placeholder="è¯·ä»‹ç»ä¸€ä¸‹è¿™é¦–éŸ³ä¹ä½œå“" required></textarea>
        </div>
        <div class="form-group">
          <label>è®¿é—®æƒé™</label>
          <select id="musicPermission" class="form-control" onchange="togglePermissionSettings('music')">
            <option value="public">ğŸŒ å…¬å¼€ï¼ˆæ‰€æœ‰äººå¯è§ï¼‰</option>
            <option value="friend">ğŸ‘¥ ä»…å¥½å‹å¯è§</option>
            <option value="visitor">ğŸ‘¤ è®¿å®¢åŠä»¥ä¸Šå¯è§</option>
            <option value="custom">âš™ï¸ è‡ªå®šä¹‰æƒé™</option>
            <option value="private">ğŸ”’ ç§æœ‰ï¼ˆä»…è‡ªå·±å¯è§ï¼‰</option>
          </select>
        </div>

        <!-- è‡ªå®šä¹‰æƒé™è®¾ç½® -->
        <div id="musicCustomPermissions" class="form-group" style="display: none;">
          <label>è‡ªå®šä¹‰æƒé™è®¾ç½®</label>
          <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin-bottom: 10px;">
            <div class="form-group">
              <label>
                <input type="radio" name="musicPermissionType" value="whitelist" checked>
                ç™½åå•æ¨¡å¼ï¼ˆä»…æŒ‡å®šç”¨æˆ·å¯è§ï¼‰
              </label>
            </div>
            <div class="form-group">
              <label>
                <input type="radio" name="musicPermissionType" value="blacklist">
                é»‘åå•æ¨¡å¼ï¼ˆæŒ‡å®šç”¨æˆ·ä¸å¯è§ï¼‰
              </label>
            </div>
            <div class="form-group">
              <label>æŒ‡å®šç”¨æˆ·ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</label>
              <input type="text" id="musicUserList" class="form-control" placeholder="ä¾‹å¦‚ï¼šuser1, user2, user3">
            </div>
          </div>
          <div class="permission-preview" id="musicPermissionPreview"></div>
        </div>
        <div class="form-actions">
          <button type="button" id="submitMusic" class="btn btn-primary">å‘å¸ƒä½œå“</button>
          <button type="button" id="resetMusic" class="btn btn-secondary">é‡ç½®è¡¨å•</button>
        </div>
      </div>

      <!-- è§†é¢‘ä½œå“ä¸Šä¼ è¡¨å• -->
      <div id="videoForm" class="upload-form" style="display: none;">
        <div class="form-group">
          <label>è§†é¢‘ä½œå“ç±»å‹</label>
          <select id="videoSubcategory" class="form-control">
            <option value="short">åˆ›æ„çŸ­ç‰‡</option>
            <option value="documentary">çºªå½•ç‰‡</option>
            <option value="travel">æ—…è¡Œå½±åƒ</option>
          </select>
        </div>
        <div class="form-group">
          <label>ä½œå“é¢˜ç›® <span class="required">*</span></label>
          <input type="text" id="videoTitle" class="form-control" placeholder="è¯·è¾“å…¥ä½œå“é¢˜ç›®" required>
        </div>
        <div class="form-group">
          <label>è§†é¢‘æ–‡ä»¶ <span class="required">*</span></label>
          <div class="file-upload-area">
            <input type="file" id="videoFile" class="form-control" accept="video/*" required>
            <div class="file-upload-hint">æ”¯æŒ MP4ã€AVIã€MOVã€WMVã€MKV æ ¼å¼ï¼Œæœ€å¤§ 10MB</div>
          </div>
        </div>
        <div class="form-group">
          <label>ä½œå“ç®€ä»‹ <span class="required">*</span></label>
          <textarea id="videoDescription" class="form-control" rows="4" placeholder="è¯·ä»‹ç»ä¸€ä¸‹è¿™ä¸ªè§†é¢‘ä½œå“" required></textarea>
        </div>
        <div class="form-group">
          <label>è®¿é—®æƒé™</label>
          <select id="videoPermission" class="form-control" onchange="togglePermissionSettings('video')">
            <option value="public">ğŸŒ å…¬å¼€ï¼ˆæ‰€æœ‰äººå¯è§ï¼‰</option>
            <option value="friend">ğŸ‘¥ ä»…å¥½å‹å¯è§</option>
            <option value="visitor">ğŸ‘¤ è®¿å®¢åŠä»¥ä¸Šå¯è§</option>
            <option value="custom">âš™ï¸ è‡ªå®šä¹‰æƒé™</option>
            <option value="private">ğŸ”’ ç§æœ‰ï¼ˆä»…è‡ªå·±å¯è§ï¼‰</option>
          </select>
        </div>

        <!-- è‡ªå®šä¹‰æƒé™è®¾ç½® -->
        <div id="videoCustomPermissions" class="form-group" style="display: none;">
          <label>è‡ªå®šä¹‰æƒé™è®¾ç½®</label>
          <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin-bottom: 10px;">
            <div class="form-group">
              <label>
                <input type="radio" name="videoPermissionType" value="whitelist" checked>
                ç™½åå•æ¨¡å¼ï¼ˆä»…æŒ‡å®šç”¨æˆ·å¯è§ï¼‰
              </label>
            </div>
            <div class="form-group">
              <label>
                <input type="radio" name="videoPermissionType" value="blacklist">
                é»‘åå•æ¨¡å¼ï¼ˆæŒ‡å®šç”¨æˆ·ä¸å¯è§ï¼‰
              </label>
            </div>
            <div class="form-group">
              <label>æŒ‡å®šç”¨æˆ·ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰</label>
              <input type="text" id="videoUserList" class="form-control" placeholder="ä¾‹å¦‚ï¼šuser1, user2, user3">
            </div>
          </div>
          <div class="permission-preview" id="videoPermissionPreview"></div>
        </div>
        <div class="form-actions">
          <button type="button" id="submitVideo" class="btn btn-primary">å‘å¸ƒä½œå“</button>
          <button type="button" id="resetVideo" class="btn btn-secondary">é‡ç½®è¡¨å•</button>
        </div>
      </div>

      <!-- ä¸Šä¼ è¯´æ˜ -->
      <div class="upload-info">
        <h4>ğŸ“‹ ä¸Šä¼ è¯´æ˜</h4>
        <ul>
          <li><strong>æ–‡å­¦ä½œå“ï¼š</strong>æ”¯æŒè¡¨å•è¾“å…¥ï¼Œå†…å®¹æ”¯æŒMarkdownæ ¼å¼</li>
          <li><strong>åª’ä½“ä½œå“ï¼š</strong>éœ€è¦ä¸Šä¼ å¯¹åº”çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å¤§å°é™åˆ¶10MB</li>
          <li><strong>æ•°æ®å®‰å…¨ï¼š</strong>ä½œå“æŒ‰ç”¨æˆ·åˆ†ç±»å­˜å‚¨ï¼Œç¡®ä¿æ•°æ®éš”ç¦»</li>
          <li><strong>æƒé™æ§åˆ¶ï¼š</strong>æ‚¨å¯ä»¥è®¾ç½®ä½œå“çš„è®¿é—®æƒé™</li>
          <li><strong>åˆ†ç±»å±•ç¤ºï¼š</strong>ä¸Šä¼ çš„ä½œå“å°†åœ¨ä¸»é¡µå¯¹åº”åˆ†ç±»ä¸­å±•ç¤º</li>
        </ul>
      </div>
    </section>
  </main>

  <!-- é¡µè„š -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <p>&copy; 2024 æ¡‘æ¢“. ä¸ªäººæ–‡å­¦åˆ›ä½œåˆ†äº«å¹³å°.</p>
        <div class="footer-links">
          <a href="index.html" class="home-button">é¦–é¡µ</a>
          <div class="works-dropdown">
            <span class="dropdown-trigger">ä½œå“å±•ç¤º â–¼</span>
            <div class="dropdown-menu">
              <a href="essays.html">ç”Ÿæ´»éšç¬”</a>
              <a href="poetry.html">è¯—æ­Œåˆ›ä½œ</a>
              <a href="novels.html">å°è¯´è¿è½½</a>
              <a href="artworks.html">ç»˜ç”»ä½œå“</a>
              <a href="music.html">éŸ³ä¹ä½œå“</a>
              <a href="videos.html">è§†é¢‘ä½œå“</a>
            </div>
          </div>
          <a href="upload.html">ä¸Šä¼ ä½œå“</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
  <button id="backToTop" class="back-to-top" onclick="scrollToTop()">â†‘</button>



  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

  <!-- iOSå…¼å®¹æ€§ä¿®å¤ - å¿…é¡»åœ¨å…¶ä»–è„šæœ¬ä¹‹å‰åŠ è½½ -->
  <script src="js/ios-compatibility.js"></script>

  <!-- åº”ç”¨è„šæœ¬ -->
  <script src="js/github-storage.js"></script>
  <script src="js/data-manager.js"></script>
  <script src="js/script.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/user-status.js"></script>
  <script src="js/unified-button-styles.js"></script>

  <script src="js/upload.js"></script>

  <script>
    // é¡µé¢ä¸“ç”¨JavaScript





    // è¿”å›é¡¶éƒ¨åŠŸèƒ½
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // æ˜¾ç¤ºè¿”å›é¡¶éƒ¨æŒ‰é’®
    window.addEventListener('scroll', () => {
      const backToTop = document.getElementById('backToTop');
      if (window.pageYOffset > 300) {
        backToTop.style.display = 'block';
      } else {
        backToTop.style.display = 'none';
      }
    });



    // æ˜¾ç¤ºé€šçŸ¥æ¶ˆæ¯å‡½æ•°
    function showNotification(message, type = 'info') {
      // åˆ›å»ºé€šçŸ¥å…ƒç´ 
      const notification = document.createElement('div');
      notification.className = `notification notification-${type}`;
      notification.textContent = message;

      // æ·»åŠ æ ·å¼
      notification.style.cssText = `
        position: fixed;
        top: 80px;
        right: 20px;
        padding: 15px 20px;
        border-radius: 5px;
        color: white;
        font-weight: bold;
        z-index: 10001;
        max-width: 300px;
        word-wrap: break-word;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        animation: slideInRight 0.3s ease-out;
      `;

      // æ ¹æ®ç±»å‹è®¾ç½®èƒŒæ™¯è‰²
      const colors = {
        success: '#4CAF50',
        error: '#f44336',
        warning: '#ff9800',
        info: '#2196F3'
      };
      notification.style.backgroundColor = colors[type] || colors.info;

      // æ·»åŠ åˆ°é¡µé¢
      document.body.appendChild(notification);

      // 3ç§’åè‡ªåŠ¨ç§»é™¤
      setTimeout(() => {
        if (notification.parentNode) {
          notification.style.animation = 'slideOutRight 0.3s ease-in';
          setTimeout(() => {
            if (notification.parentNode) {
              notification.parentNode.removeChild(notification);
            }
          }, 300);
        }
      }, 3000);
    }
    // æƒé™è®¾ç½®åŠŸèƒ½
    function togglePermissionSettings(category) {
      const permissionSelect = document.getElementById(`${category}Permission`);
      const customPermissions = document.getElementById(`${category}CustomPermissions`);

      if (permissionSelect.value === 'custom') {
        customPermissions.style.display = 'block';
        updatePermissionPreview(category);
      } else {
        customPermissions.style.display = 'none';
        updatePermissionPreview(category);
      }
    }

    function updatePermissionPreview(category) {
      const permissionSelect = document.getElementById(`${category}Permission`);
      const preview = document.getElementById(`${category}PermissionPreview`);
      const userList = document.getElementById(`${category}UserList`);
      const permissionType = document.querySelector(`input[name="${category}PermissionType"]:checked`);

      if (!preview) return;

      let previewText = '';
      const selectedValue = permissionSelect.value;

      switch (selectedValue) {
        case 'public':
          previewText = '<h5>ğŸŒ å…¬å¼€æƒé™</h5><p>æ‰€æœ‰è®¿é—®è€…éƒ½å¯ä»¥æŸ¥çœ‹æ­¤ä½œå“</p>';
          break;
        case 'friend':
          previewText = '<h5>ğŸ‘¥ å¥½å‹æƒé™</h5><p>åªæœ‰å¥½å‹çº§åˆ«åŠä»¥ä¸Šç”¨æˆ·å¯ä»¥æŸ¥çœ‹</p>';
          break;
        case 'visitor':
          previewText = '<h5>ğŸ‘¤ è®¿å®¢æƒé™</h5><p>è®¿å®¢çº§åˆ«åŠä»¥ä¸Šç”¨æˆ·å¯ä»¥æŸ¥çœ‹</p>';
          break;
        case 'private':
          previewText = '<h5>ğŸ”’ ç§æœ‰æƒé™</h5><p>åªæœ‰æ‚¨è‡ªå·±å¯ä»¥æŸ¥çœ‹æ­¤ä½œå“</p>';
          break;
        case 'custom':
          if (permissionType && userList) {
            const users = userList.value.split(',').map(u => u.trim()).filter(u => u);
            const mode = permissionType.value;

            if (mode === 'whitelist') {
              previewText = '<h5>âš™ï¸ ç™½åå•æ¨¡å¼</h5>';
              if (users.length > 0) {
                previewText += '<p>åªæœ‰ä»¥ä¸‹ç”¨æˆ·å¯ä»¥æŸ¥çœ‹ï¼š</p><ul>';
                users.forEach(user => {
                  previewText += `<li>${user}</li>`;
                });
                previewText += '</ul>';
              } else {
                previewText += '<p>è¯·æŒ‡å®šå…è®¸æŸ¥çœ‹çš„ç”¨æˆ·</p>';
              }
            } else {
              previewText = '<h5>âš™ï¸ é»‘åå•æ¨¡å¼</h5>';
              if (users.length > 0) {
                previewText += '<p>é™¤ä»¥ä¸‹ç”¨æˆ·å¤–ï¼Œå¥½å‹çº§åˆ«ç”¨æˆ·éƒ½å¯ä»¥æŸ¥çœ‹ï¼š</p><ul>';
                users.forEach(user => {
                  previewText += `<li>${user}</li>`;
                });
                previewText += '</ul>';
              } else {
                previewText += '<p>æ‰€æœ‰å¥½å‹çº§åˆ«ç”¨æˆ·éƒ½å¯ä»¥æŸ¥çœ‹</p>';
              }
            }
          }
          break;
      }

      preview.innerHTML = previewText;
    }

    // GitHubé…ç½®çŠ¶æ€æ£€æŸ¥
    function checkGitHubConfig() {
      const savedToken = localStorage.getItem('github_token');
      const configSection = document.getElementById('githubConfigSection');

      if (configSection) {
        if (!savedToken) {
          // å¦‚æœæ²¡æœ‰é…ç½® Tokenï¼Œæ˜¾ç¤ºé…ç½®æç¤º
          configSection.style.display = 'block';
        } else {
          // å¦‚æœå·²é…ç½® Tokenï¼Œéšè—é…ç½®æç¤º
          configSection.style.display = 'none';
        }
      }
    }

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æƒé™è®¾ç½®
    document.addEventListener('DOMContentLoaded', function() {
      setTimeout(() => {
        checkGitHubConfig();

        // ä¸ºæ‰€æœ‰æƒé™è®¾ç½®æ·»åŠ äº‹ä»¶ç›‘å¬
        ['literature', 'art', 'music', 'video'].forEach(category => {
          const userList = document.getElementById(`${category}UserList`);
          const permissionRadios = document.querySelectorAll(`input[name="${category}PermissionType"]`);

          if (userList) {
            userList.addEventListener('input', () => updatePermissionPreview(category));
          }

          permissionRadios.forEach(radio => {
            radio.addEventListener('change', () => updatePermissionPreview(category));
          });
        });

        // æ£€æŸ¥GitHubé…ç½®çŠ¶æ€ï¼ˆæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥çœ‹åˆ°é…ç½®æç¤ºï¼‰
        checkGitHubConfig();
      }, 1000);
    });






  </script>
</body>
</html>