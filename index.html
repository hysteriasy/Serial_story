<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="format-detection" content="telephone=no">
    <title>æ¡‘æ¢“ - ä¸ªäººåˆ†äº«å¹³å°</title>
    <meta name="description" content="ä¸ªäººæ–‡å­¦åˆ›ä½œä½œå“å±•ç¤ºå’Œåˆ†äº«ç½‘ç«™ï¼ŒåŒ…å«éšç¬”ã€è¯—æ­Œã€å°è¯´è¿è½½ç­‰åŸåˆ›æ–‡å­¦ä½œå“">

    <!-- ç«‹å³æ‰§è¡Œæ§åˆ¶å°è¿‡æ»¤è„šæœ¬ - å¿…é¡»åœ¨æ‰€æœ‰å…¶ä»–è„šæœ¬ä¹‹å‰ -->
    <script>
        // åœ¨é¡µé¢åŠ è½½çš„æœ€æ—©é˜¶æ®µå°±è®¾ç½®æ§åˆ¶å°è¿‡æ»¤
        (function() {
            console.log('ğŸ”§ åˆå§‹åŒ–æ§åˆ¶å°è¿‡æ»¤å™¨...');

            // ä¿å­˜åŸå§‹æ§åˆ¶å°æ–¹æ³•
            const originalWarn = console.warn;
            const originalError = console.error;
            const originalLog = console.log;

            // è·Ÿè¸ªè¿‡æ»¤ç»Ÿè®¡
            let filteredWarnings = 0;
            let filteredErrors = 0;

            // é‡å†™console.warn
            console.warn = function(...args) {
                const message = args.join(' ');
                const isProduction = window.location.hostname.includes('github.io');

                // åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿‡æ»¤æ›´å¤šç±»å‹çš„è­¦å‘Š
                const shouldFilter = message.includes('Tracking Prevention') ||
                    message.includes('blocked access to storage') ||
                    message.includes('ERR_BLOCKED_BY_CLIENT') ||
                    message.includes('-ms-high-contrast') ||
                    message.includes('deprecated') ||
                    message.includes('storage access denied') ||
                    message.includes('privacy protection') ||
                    message.includes('cross-site tracking') ||
                    message.includes('third-party storage') ||
                    message.includes('QuotaExceededError') ||
                    (isProduction && (
                        message.includes('è·Ÿè¸ªä¿æŠ¤') ||
                        message.includes('iOSç‰¹å®šä¿®å¤') ||
                        message.includes('åˆå§‹åŒ–éƒ¨åˆ†å¤±è´¥') ||
                        message.includes('Firebase ä¸å¯ç”¨') ||
                        message.includes('æœªé…ç½®æœ‰æ•ˆçš„ Firebase') ||
                        message.includes('å­˜å‚¨è®¿é—®å¤±è´¥') ||
                        message.includes('GitHub tokenæœªé…ç½®')
                    ));

                if (shouldFilter) {
                    filteredWarnings++;
                    return; // å®Œå…¨é˜»æ­¢æ˜¾ç¤º
                }

                // æ˜¾ç¤ºå…¶ä»–è­¦å‘Š
                originalWarn.apply(console, args);
            };

            // é‡å†™console.error
            console.error = function(...args) {
                const message = args.join(' ');
                const isProduction = window.location.hostname.includes('github.io');

                // åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿‡æ»¤æ›´å¤šç±»å‹çš„é”™è¯¯
                const shouldFilter = message.includes('googleads') ||
                    message.includes('doubleclick') ||
                    message.includes('ad_status.js') ||
                    message.includes('ERR_NAME_NOT_RESOLVED') ||
                    message.includes('ERR_BLOCKED_BY_CLIENT') ||
                    message.includes('Failed to load resource') ||
                    message.includes('Tracking Prevention') ||
                    message.includes('blocked access to storage') ||
                    message.includes('storage access denied') ||
                    message.includes('QuotaExceededError') ||
                    message.includes('SecurityError') ||
                    (isProduction && (
                        message.includes('ç½‘ç»œè¿æ¥é—®é¢˜') ||
                        message.includes('Firebase åˆå§‹åŒ–å¤±è´¥') ||
                        message.includes('å­˜å‚¨è®¿é—®å¤±è´¥') ||
                        message.includes('GitHub API è®¿é—®å¤±è´¥') ||
                        message.includes('è·Ÿè¸ªä¿æŠ¤é˜»æ­¢äº†å­˜å‚¨è®¿é—®')
                    ));

                if (shouldFilter) {
                    filteredErrors++;
                    return; // å®Œå…¨é˜»æ­¢æ˜¾ç¤º
                }

                // æ˜¾ç¤ºå…¶ä»–é”™è¯¯
                originalError.apply(console, args);
            };

            // å®šæœŸæŠ¥å‘Šè¿‡æ»¤ç»Ÿè®¡ï¼ˆä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼‰
            if (window.location.hostname === 'localhost') {
                setInterval(() => {
                    if (filteredWarnings > 0 || filteredErrors > 0) {
                        originalLog(`ğŸ”‡ æ§åˆ¶å°è¿‡æ»¤ç»Ÿè®¡: ${filteredWarnings} ä¸ªè­¦å‘Š, ${filteredErrors} ä¸ªé”™è¯¯å·²è¢«è¿‡æ»¤`);
                        filteredWarnings = 0;
                        filteredErrors = 0;
                    }
                }, 15000); // æ¯15ç§’æŠ¥å‘Šä¸€æ¬¡
            }

            console.log('âœ… æ§åˆ¶å°è¿‡æ»¤å™¨å·²æ¿€æ´»');
        })();
    </script>

    <link rel="stylesheet" href="css/style.css?v=20240807">
    <link rel="stylesheet" href="css/ios-compatibility.css?v=20240810">
    <link rel="stylesheet" href="css/wechat-compatibility.css?v=20241218">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- æ¬¢è¿é¡µé¢è¦†ç›–å±‚ -->
    <div id="welcome-overlay" class="welcome-overlay" onclick="hideWelcomeScreen()">
        <div class="welcome-content">
            <div class="welcome-animation">
                <h1 class="welcome-title">
                    <span class="title-line">æ¬¢è¿æ¥åˆ°</span>
                    <span class="title-main">æ¡‘æ¢“</span>
                </h1>
                <p class="welcome-description">åœ¨è¿™é‡Œï¼Œæ¯ä¸€ä¸ªæ–‡å­—éƒ½æ˜¯ä¸€æœµèŠ±</p>
                <div class="welcome-hint">
                    <span class="hint-text">ç‚¹å‡»ä»»æ„ä½ç½®è¿›å…¥</span>
                    <div class="hint-arrow">â†“</div>
                </div>
            </div>
            <div class="welcome-background-effects">
                <div class="floating-particles"></div>
                <div class="gradient-orbs"></div>
            </div>
        </div>
    </div>

    <!-- é¡µçœ‰å°†é€šè¿‡ç»„ä»¶åŠ¨æ€æ’å…¥ -->

    <!-- ä¸»è¦å†…å®¹ -->
    <main>
        <!-- é¦–é¡µéƒ¨åˆ† -->
        <section id="home" class="hero">
            <div class="hero-container">
                <h1 class="hero-title">æ¡‘æ¢“</h1>
                <p class="hero-description">æˆ‘ä¸æ—¶è¦å°†å¿ƒä¸Šçš„é‡é‡åŒ–æˆæ–‡å­—ï¼Œç§»ä¸€ä»½äºçº¸ä¸Šï¼Œä»¥ä¾¿æˆ‘èƒ½ä½™å‡ºäº›æ°”åŠ›ï¼Œå»åšæˆ‘æƒ³åšçš„äº‹ï¼Œåšæˆ‘è¯¥åšçš„äº‹ã€‚</p>
                <div class="hero-buttons">
                    <button class="btn btn-primary" onclick="scrollToSection('works')">é˜…è¯»ä½œå“</button>
                    <button class="btn btn-secondary" onclick="scrollToSection('about')">äº†è§£ä½œè€…</button>
                    <button class="btn btn-outline" onclick="navigateToMyWorks()" id="myWorksBtn" style="display: none;">æˆ‘çš„ä½œå“</button>
                </div>
            </div>
        </section>

        <!-- å…³äºéƒ¨åˆ† -->
        <section id="about" class="about">
            <div class="container">
                <h2 class="section-title">å…³äºä½œè€…</h2>
                <div class="about-content">
                    <div class="about-text">
                        <p>åˆå§‹ï¼Œæˆ‘çˆ±é²è¿…ï¼Œæ˜¯ä»–çš„æ•£æ–‡å’Œå°è¯´ï¼Œè¯å¥é—´çš„â€œå¥‡è¶£â€ã€‚æˆ‘æŠŠæƒ³æ³•è®²ç»™è€å¸ˆï¼Œè€å¸ˆè¯´ï¼Œé²è¿…çš„é€ å¥ï¼Œæ˜¯å¤ä»Šæ–‡è¿‡æ¸¡çš„äº§ç‰©ï¼Œä¸åˆæ—¶å®œã€‚æˆ‘æ˜¯ä¸ä¿¡æœçš„ã€‚</p>
                        <p>è½¬è€Œï¼Œæˆ‘çˆ±æ¢å®ç§‹ï¼Œæ˜¯ä»–åœ¨è‰°éš¾æ—¶åŠ¿ä¸‹è¡Œé—´çš„æ´’è„±å’Œæ„è¶£ã€‚æˆ‘æŠŠæƒ³æ³•è®²ç»™æœ‹å‹ï¼Œæœ‹å‹è¯´ï¼Œé‚£æ˜¯é¿ä¸–çš„æ¶ˆæï¼Œæ¶ˆç£¨é’å¹´æ„æ°”ã€‚æˆ‘æ˜¯ä¸ä¿¡æœçš„ã€‚</p>
                        <p>åæ¥ï¼Œæˆ‘çˆ±è·¯é¥ï¼Œæ˜¯çˆ±æ•…äº‹é‡Œç”Ÿæ´»ä¸ç†æƒ³çš„é”™è½ï¼Œå’Œéšçº¦çš„å¸Œæœ›ã€‚æˆ‘ä¸å†æŠŠæƒ³æ³•è®²ç»™äººå¬â€¦â€¦</p>
                        <p>ç„¶åï¼Œæˆ‘åªå¥½æ˜¯å­¤ç‹¬çš„ï¼Œç›¼æœ›ç€ä½ ä»æˆ‘çš„ä¸–ç•Œé‡Œè·¯è¿‡ã€‚</p>
                        <ul class="feature-list">
                            <li>éšç¬”æ•£æ–‡ - è®°å½•ç”Ÿæ´»ä¸­çš„ç‚¹æ»´æ„Ÿæ‚Ÿ</li>
                            <li>ç°ä»£è¯—æ­Œ - ç”¨ç°ä»£è¯­è¨€è¡¨è¾¾å†…å¿ƒæƒ…æ„Ÿ</li>
                            <li>å¤å…¸è¯—è¯ - ä¼ æ‰¿å¤å…¸æ–‡å­¦çš„VENTUNE</li>
                            <li>å°è¯´è¿è½½ - æ„å»ºå®Œæ•´çš„æ•…äº‹ä¸–ç•Œ</li>
                        </ul>
                    </div>
                    <div class="about-image">
                        <div class="placeholder-image">
                            <span>ğŸ“š æ–‡å­¦åˆ›ä½œè€…</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ä½œå“åˆ†ç±»å¯¼èˆª -->
        <section id="works" class="projects">
            <div class="container">
                <h2 class="section-title">ä½œå“åˆ†ç±»</h2>
                <p class="section-subtitle">æ¢ç´¢ä¸åŒç±»å‹çš„åˆ›ä½œä½œå“</p>

                <div class="category-grid">
                    <!-- æ–‡å­¦ä½œå“åˆ†ç±» -->
                    <div class="category-section">
                        <h3 class="category-title">ğŸ“š æ–‡å­¦ä½œå“</h3>
                        <div class="category-cards">
                            <div class="category-card essays-card">
                                <div class="card-content">
                                    <h4>ç”Ÿæ´»éšç¬”</h4>
                                    <p>è®°å½•æ—¥å¸¸ç”Ÿæ´»ä¸­çš„æ„Ÿæ‚Ÿä¸æ€è€ƒ</p>
                                    <a href="essays.html" class="category-link">è¿›å…¥é˜…è¯»</a>
                                </div>
                            </div>
                            <div class="category-card">
                                <div class="card-content">
                                    <h4>è¯—æ­Œåˆ›ä½œ</h4>
                                    <p>ç°ä»£è¯—æ­Œä¸å¤å…¸è¯—è¯</p>
                                    <a href="poetry.html" class="category-link">è¿›å…¥é˜…è¯»</a>
                                </div>
                            </div>
                            <div class="category-card">
                                <div class="card-content">
                                    <h4>å°è¯´è¿è½½</h4>
                                    <p>é•¿ç¯‡å°è¯´è¿è½½æ›´æ–°</p>
                                    <a href="novels.html" class="category-link">è¿›å…¥é˜…è¯»</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- åª’ä½“ä½œå“åˆ†ç±» -->
                    <div class="category-section">
                        <h3 class="category-title">ğŸ¨ åª’ä½“ä½œå“</h3>
                        <div class="category-cards">
                            <div class="category-card">
                                <div class="card-content">
                                    <h4>ç»˜ç”»ä½œå“</h4>
                                    <p>æ°´å½©ã€ç´ æä¸æ•°å­—ç»˜ç”»</p>
                                    <a href="artworks.html" class="category-link">è¿›å…¥æ¬£èµ</a>
                                </div>
                            </div>
                            <div class="category-card">
                                <div class="card-content">
                                    <h4>éŸ³ä¹åˆ›ä½œ</h4>
                                    <p>åŸåˆ›éŸ³ä¹ä½œå“</p>
                                    <a href="music.html" class="category-link">è¿›å…¥è†å¬</a>
                                </div>
                            </div>
                            <div class="category-card">
                                <div class="card-content">
                                    <h4>è§†é¢‘ä½œå“</h4>
                                    <p>åˆ›æ„çŸ­ç‰‡ä¸çºªå½•ç‰‡</p>
                                    <a href="videos.html" class="category-link">è¿›å…¥è§‚çœ‹</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å¿«é€Ÿç»Ÿè®¡ -->
                <div class="works-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="totalWorks">0</span>
                        <span class="stat-label">æ€»ä½œå“æ•°</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="literatureCount">0</span>
                        <span class="stat-label">æ–‡å­¦ä½œå“</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="mediaCount">0</span>
                        <span class="stat-label">åª’ä½“ä½œå“</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="lastUpdate">--</span>
                        <span class="stat-label">æœ€è¿‘æ›´æ–°</span>
                    </div>
                </div>
            </div>
        </section>



        <!-- è®¤è¯ç”¨æˆ·ä¸“ç”¨å†…å®¹ -->
        <section id="auth-section" class="auth-required" style="display: none; background: #f8f9fa; padding: 40px 0;">
            <div class="container">
                <h2 class="section-title" style="text-align: center; margin-bottom: 30px;">
                    ğŸ‰ æ¬¢è¿ç™»å½•ç”¨æˆ·
                </h2>
                <div style="text-align: center; max-width: 800px; margin: 0 auto;">
                    <p style="font-size: 1.1em; color: #6c757d; margin-bottom: 30px;">
                        æ„Ÿè°¢æ‚¨çš„ç™»å½•ï¼ä½œä¸ºæ³¨å†Œç”¨æˆ·ï¼Œæ‚¨å¯ä»¥äº«å—æ›´å¤šåŠŸèƒ½å’Œå†…å®¹ã€‚
                    </p>

                    <!-- ç”¨æˆ·åŠŸèƒ½åŒºåŸŸ -->
                    <div class="user-functions" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <!-- åˆ›ä½œå‘å¸ƒåŠŸèƒ½å¡ç‰‡ - éœ€è¦ä¸Šä¼ æƒé™ -->
                        <div id="upload-function-card" class="upload-permission-required" style="display: none;">
                            <a href="upload.html" class="user-function-card" style="text-decoration: none; color: inherit;">
                                <div style="padding: 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; color: white; transition: transform 0.3s ease;">
                                    <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ“</div>
                                    <h4 style="margin-bottom: 10px; color: white;">åˆ›ä½œå‘å¸ƒ</h4>
                                    <p style="font-size: 0.9em; opacity: 0.9; margin: 0;">å‘å¸ƒæ‚¨çš„æ–‡å­¦ã€è‰ºæœ¯ä½œå“</p>
                                </div>
                            </a>
                        </div>

                        <!-- æƒé™ä¸è¶³æç¤ºå¡ç‰‡ - å¯¹æ— ä¸Šä¼ æƒé™ç”¨æˆ·æ˜¾ç¤º -->
                        <div id="upload-permission-denied" class="upload-permission-denied" style="display: none;">
                            <div class="user-function-card" style="text-decoration: none; color: inherit; cursor: not-allowed; opacity: 0.6;">
                                <div style="padding: 25px; background: linear-gradient(135deg, #6c757d 0%, #495057 100%); border-radius: 12px; color: white; position: relative;">
                                    <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ”’</div>
                                    <h4 style="margin-bottom: 10px; color: white;">åˆ›ä½œå‘å¸ƒ</h4>
                                    <p style="font-size: 0.9em; opacity: 0.9; margin: 0;">éœ€è¦å¥½å‹æˆ–ç®¡ç†å‘˜æƒé™</p>
                                    <div style="position: absolute; top: 10px; right: 10px; background: rgba(220, 53, 69, 0.8); color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.7em;">
                                        æƒé™ä¸è¶³
                                    </div>
                                </div>
                            </div>
                        </div>
                        <a href="#" onclick="showMyWorks()" class="user-function-card" style="text-decoration: none; color: inherit;">
                            <div style="padding: 25px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 12px; color: white; transition: transform 0.3s ease;">
                                <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ“‚</div>
                                <h4 style="margin-bottom: 10px; color: white;">æˆ‘çš„ä½œå“</h4>
                                <p style="font-size: 0.9em; opacity: 0.9; margin: 0;">ç®¡ç†å’Œç¼–è¾‘æ‚¨çš„ä½œå“</p>
                            </div>
                        </a>
                        <a href="#" onclick="showAccountSettings()" class="user-function-card" style="text-decoration: none; color: inherit;">
                            <div style="padding: 25px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); border-radius: 12px; color: white; transition: transform 0.3s ease;">
                                <div style="font-size: 2rem; margin-bottom: 10px;">âš™ï¸</div>
                                <h4 style="margin-bottom: 10px; color: white;">è´¦æˆ·è®¾ç½®</h4>
                                <p style="font-size: 0.9em; opacity: 0.9; margin: 0;">ä¿®æ”¹å¯†ç å’Œä¸ªäººä¿¡æ¯</p>
                            </div>
                        </a>
                    </div>

                    <!-- ç”¨æˆ·æƒç›Šè¯´æ˜ -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div style="padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <h4 style="color: #007bff; margin-bottom: 10px;">ğŸ“š ä¸“å±å†…å®¹</h4>
                            <p style="font-size: 0.9em; color: #6c757d;">è®¿é—®ä¼šå‘˜ä¸“å±æ–‡ç« </p>
                        </div>
                        <div style="padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <h4 style="color: #28a745; margin-bottom: 10px;">ğŸ’¬ äº’åŠ¨åŠŸèƒ½</h4>
                            <p style="font-size: 0.9em; color: #6c757d;">å‚ä¸è¯„è®ºå’Œè®¨è®º</p>
                        </div>
                        <div style="padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <h4 style="color: #ffc107; margin-bottom: 10px;">âœ¨ ä¸ªæ€§åŒ–</h4>
                            <p style="font-size: 0.9em; color: #6c757d;">å®šåˆ¶æ‚¨çš„é˜…è¯»ä½“éªŒ</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- è”ç³»éƒ¨åˆ† -->
        <section id="contact" class="contact">
            <div class="container">
                <h2 class="section-title">è”ç³»ä½œè€…</h2>
                <div class="contact-content">
                    <div class="contact-info">
                        <h3>ä¸æˆ‘äº¤æµ</h3>
                        <p>å¦‚æœæ‚¨å¯¹æˆ‘çš„ä½œå“æœ‰ä»»ä½•æ„Ÿæƒ³ã€å»ºè®®æˆ–æƒ³è¦äº¤æµæ–‡å­¦åˆ›ä½œï¼Œæ¬¢è¿ä¸æˆ‘è”ç³»ã€‚æ¯ä¸€ä»½åé¦ˆéƒ½æ˜¯æˆ‘åˆ›ä½œè·¯ä¸Šçš„çè´µç¤¼ç‰©ã€‚</p>
                        <div class="contact-item">
                            <strong>åˆ›ä½œç†å¿µ:</strong> ç”¨æ–‡å­—æ¸©æš–äººå¿ƒï¼Œç”¨æ•…äº‹è¿æ¥ä¸–ç•Œ
                        </div>
                        <div class="contact-item">
                            <strong>æ›´æ–°é¢‘ç‡:</strong> ä¸å®šæœŸæ›´æ–°ï¼Œä¿æŒåˆ›ä½œçš„çœŸè¯šä¸è´¨é‡
                        </div>
                    </div>
                    <div class="contact-form">
                        <form id="contactForm">
                            <div class="form-group">
                                <label for="name">æ‚¨çš„ç§°å‘¼</label>
                                <input type="text" id="name" name="name" placeholder="è¯·è¾“å…¥æ‚¨çš„ç§°å‘¼" required>
                            </div>
                            <div class="form-group">
                                <label for="email">è”ç³»é‚®ç®±</label>
                                <input type="email" id="email" name="email" placeholder="æ‚¨çš„é‚®ç®±åœ°å€" required>
                            </div>
                            <div class="form-group">
                                <label for="message">æƒ³å¯¹æˆ‘è¯´çš„è¯</label>
                                <textarea id="message" name="message" rows="5" placeholder="åˆ†äº«æ‚¨å¯¹ä½œå“çš„æ„Ÿæƒ³ï¼Œæˆ–è€…ä»»ä½•æƒ³è¯´çš„è¯..." required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">å‘é€ç•™è¨€</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç®¡ç†å‘˜ä¸“ç”¨åŒºåŸŸ -->
        <section id="adminSection" class="admin-section" style="display: none;">
            <div class="container">
                <div class="admin-panel">
                    <h2 class="admin-title">ğŸ”§ ç®¡ç†å‘˜æ§åˆ¶é¢æ¿</h2>
                    <p class="admin-subtitle">ç³»ç»Ÿç®¡ç†å’Œç”¨æˆ·æƒé™æ§åˆ¶</p>
                    <div class="admin-buttons">
                        <a href="user-management.html" class="admin-btn">
                            <div class="admin-btn-icon">ğŸ‘¥</div>
                            <div class="admin-btn-content">
                                <h3>ç”¨æˆ·ç®¡ç†</h3>
                                <p>ç®¡ç†ç”¨æˆ·è´¦æˆ·ã€è§’è‰²æƒé™å’Œç”¨æˆ·æ“ä½œ</p>
                            </div>
                        </a>
                        <a href="admin.html" class="admin-btn">
                            <div class="admin-btn-icon">âš™ï¸</div>
                            <div class="admin-btn-content">
                                <h3>ç³»ç»Ÿç®¡ç†</h3>
                                <p>ç³»ç»Ÿè®¾ç½®ã€æ–‡ä»¶æƒé™å’Œé…ç½®ç®¡ç†</p>
                            </div>
                        </a>
                        <a href="admin-dashboard.html" class="admin-btn">
                            <div class="admin-btn-icon">ğŸ“Š</div>
                            <div class="admin-btn-content">
                                <h3>ç®¡ç†ä»ªè¡¨æ¿</h3>
                                <p>ç³»ç»Ÿç»Ÿè®¡ã€æ“ä½œæ—¥å¿—å’Œç›‘æ§æ•°æ®</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- é¡µè„šå°†é€šè¿‡ç»„ä»¶åŠ¨æ€æ’å…¥ -->

    <!-- ç™»å½•æ¨¡æ€æ¡†å’Œç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºåŒºåŸŸå°†é€šè¿‡ç»„ä»¶åŠ¨æ€æ’å…¥ -->

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

    <!-- Firebase é…ç½®ä¼˜åŒ–è„šæœ¬ -->
    <script>
        // Firebase é…ç½®ä¼˜åŒ– - å‡å°‘æœªé…ç½®è­¦å‘Š
        (function() {
            // æ£€æŸ¥ç¯å¢ƒï¼Œå†³å®šæ˜¯å¦åˆå§‹åŒ– Firebase
            const hostname = window.location.hostname;
            const isProduction = hostname.includes('github.io');
            const isLocal = hostname === 'localhost' || hostname === '127.0.0.1';
            const isFile = window.location.protocol === 'file:';

            // åœ¨ç”Ÿäº§ç¯å¢ƒæˆ–æ–‡ä»¶åè®®ä¸‹ï¼Œé™é»˜å¤„ç† Firebase
            if (isProduction || isFile) {
                // åˆ›å»ºä¸€ä¸ªé™é»˜çš„ Firebase é…ç½®
                window.firebaseConfig = {
                    initialized: false,
                    available: false,
                    mode: 'offline',
                    reason: isFile ? 'file_protocol' : 'production_mode'
                };

                // é™é»˜æ¨¡å¼ä¸‹ä¸è¾“å‡º Firebase ç›¸å…³æ—¥å¿—
                if (window.console && window.console.warn) {
                    const originalWarn = window.console.warn;
                    window.console.warn = function(...args) {
                        const message = args.join(' ');
                        if (message.includes('Firebase') ||
                            message.includes('firebase') ||
                            message.includes('æœªé…ç½®æœ‰æ•ˆçš„ Firebase')) {
                            return; // é™é»˜å¤„ç† Firebase è­¦å‘Š
                        }
                        originalWarn.apply(console, args);
                    };
                }
            } else {
                // å¼€å‘ç¯å¢ƒä¸‹æ­£å¸¸å¤„ç† Firebase
                window.firebaseConfig = {
                    initialized: false,
                    available: true,
                    mode: 'development'
                };
            }
        })();
    </script>



    <!-- ç¯å¢ƒé€‚é…å™¨ - å¿…é¡»åœ¨æœ€æ—©åŠ è½½ï¼Œä¼˜åŒ–GitHub Pageså…¼å®¹æ€§ -->
    <script src="js/environment-adapter.js"></script>

    <!-- ç¯å¢ƒé…ç½®ç®¡ç†å™¨ - å¿…é¡»åœ¨æœ€æ—©åŠ è½½ -->
    <script src="js/environment-config.js"></script>

    <!-- iOSå…¼å®¹æ€§ä¿®å¤ - å¿…é¡»åœ¨å…¶ä»–è„šæœ¬ä¹‹å‰åŠ è½½ -->
    <script src="js/ios-compatibility.js"></script>

    <!-- å¾®ä¿¡æµè§ˆå™¨å…¼å®¹æ€§ä¿®å¤ - å¿…é¡»åœ¨å…¶ä»–è„šæœ¬ä¹‹å‰åŠ è½½ -->
    <script src="js/wechat-compatibility.js"></script>

    <!-- é¡µçœ‰é¡µè„šç»„ä»¶ - åœ¨å…¶ä»–è„šæœ¬ä¹‹å‰åŠ è½½ -->
    <script src="js/header.js"></script>
    <script src="js/footer.js"></script>

    <!-- ç”Ÿäº§ç¯å¢ƒæ—¥å¿—ç®¡ç†å™¨ - å¿…é¡»åœ¨å…¶ä»–è„šæœ¬ä¹‹å‰åŠ è½½ -->
    <script src="js/production-logger.js"></script>

    <!-- è·Ÿè¸ªä¿æŠ¤å¤„ç†å™¨ - å¿…é¡»åœ¨å­˜å‚¨ç›¸å…³è„šæœ¬ä¹‹å‰åŠ è½½ -->
    <script src="js/tracking-protection-handler.js"></script>

    <!-- JavaScriptæ–‡ä»¶ -->
    <script src="js/storage-optimizer.js"></script>
    <script src="js/github-storage.js"></script>
    <script src="js/data-manager.js"></script>
    <script src="js/script.js"></script>
    <script src="js/auth.js"></script>
    <!-- <script src="js/user-status.js"></script> å·²ç§»é™¤ï¼Œé¡µçœ‰ç»„ä»¶å·²åŒ…å«ç”¨æˆ·çŠ¶æ€ç®¡ç† -->
    <script src="js/system-stats.js"></script>
    <script src="js/homepage-integration.js"></script>

    <!-- ç”¨æˆ·ä½œå“åˆ—è¡¨ä¿®å¤å·¥å…· -->
    <script src="js/fix-user-works-list.js"></script>

    <!-- åˆå§‹åŒ–é¡µçœ‰é¡µè„šç»„ä»¶ -->
    <script>
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–ç»„ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–é¦–é¡µç»„ä»¶...');

            // æ£€æŸ¥URLå‚æ•°ï¼Œå¦‚æœæœ‰skipWelcome=trueåˆ™è·³è¿‡æ¬¢è¿ç•Œé¢
            const urlParams = new URLSearchParams(window.location.search);
            const skipWelcome = urlParams.get('skipWelcome') === 'true';
            const hasAboutHash = window.location.hash === '#about';
            const hasContactHash = window.location.hash === '#contact';

            if (skipWelcome) {
                console.log('ğŸ”„ æ£€æµ‹åˆ°è·³è¿‡æ¬¢è¿ç•Œé¢å‚æ•°ï¼Œè‡ªåŠ¨éšè—æ¬¢è¿ç•Œé¢...');

                // ç«‹å³éšè—æ¬¢è¿ç•Œé¢
                setTimeout(() => {
                    if (typeof hideWelcomeScreen === 'function') {
                        hideWelcomeScreen();
                        console.log('âœ… æ¬¢è¿ç•Œé¢å·²éšè—');

                        // å¦‚æœæœ‰#aboutå“ˆå¸Œï¼Œæ»šåŠ¨åˆ°å…³äºæˆ‘åŒºåŸŸ
                        if (hasAboutHash) {
                            setTimeout(() => {
                                const aboutSection = document.getElementById('about');
                                if (aboutSection) {
                                    aboutSection.scrollIntoView({
                                        behavior: 'smooth',
                                        block: 'start'
                                    });
                                    console.log('âœ… å·²æ»šåŠ¨åˆ°å…³äºæˆ‘åŒºåŸŸ');
                                }
                            }, 500);
                        }

                        // å¦‚æœæœ‰#contactå“ˆå¸Œï¼Œæ»šåŠ¨åˆ°è”ç³»æˆ‘åŒºåŸŸ
                        if (hasContactHash) {
                            setTimeout(() => {
                                const contactSection = document.getElementById('contact');
                                if (contactSection) {
                                    contactSection.scrollIntoView({
                                        behavior: 'smooth',
                                        block: 'start'
                                    });
                                    console.log('âœ… å·²æ»šåŠ¨åˆ°è”ç³»æˆ‘åŒºåŸŸ');
                                }
                            }, 500);
                        }

                        // æ¸…ç†URLå‚æ•°
                        const newUrl = window.location.pathname + window.location.hash;
                        window.history.replaceState({}, document.title, newUrl);
                    }
                }, 100);
            }

            // åˆå§‹åŒ–é¡µçœ‰ç»„ä»¶
            if (typeof initHeader === 'function') {
                window.headerComponent = initHeader();
                console.log('âœ… é¡µçœ‰ç»„ä»¶åˆå§‹åŒ–å®Œæˆ');
            } else {
                console.error('âŒ initHeader å‡½æ•°æœªæ‰¾åˆ°');
            }

            // åˆå§‹åŒ–é¡µè„šç»„ä»¶
            if (typeof initFooter === 'function') {
                window.footerComponent = initFooter();
                console.log('âœ… é¡µè„šç»„ä»¶åˆå§‹åŒ–å®Œæˆ');
            } else {
                console.error('âŒ initFooter å‡½æ•°æœªæ‰¾åˆ°');
            }

            console.log('ğŸ‰ é¦–é¡µç»„ä»¶åˆå§‹åŒ–å®Œæˆ');
        });
    </script>

    <style>
        /* ç°ä»£åŒ–é€€å‡ºç™»å½•æŒ‰é’®æ ·å¼ */
        #logoutButton::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        #logoutButton:hover::before {
            left: 100%;
        }

        #logoutButton:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
        }

        #logoutButton:active {
            transform: translateY(0);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        /* ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºåŒºåŸŸç°ä»£åŒ–æ ·å¼ */
        #userInfoDisplay {
            animation: slideInFromRight 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* ä¸»å¯¼èˆªæ ä¸‹æ‹‰èœå•æ ·å¼ */
        .nav-dropdown {
            position: relative;
        }

        .dropdown-trigger {
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .nav-dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            min-width: 180px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .nav-dropdown:hover .nav-dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .nav-dropdown-link {
            display: block;
            padding: 12px 20px;
            color: #333;
            text-decoration: none;
            border-bottom: 1px solid #f0f0f0;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .nav-dropdown-link:last-child {
            border-bottom: none;
            border-radius: 0 0 12px 12px;
        }

        .nav-dropdown-link:first-child {
            border-radius: 12px 12px 0 0;
        }

        .nav-dropdown-link:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateX(5px);
        }

        /* ç®¡ç†å‘˜ä¸“ç”¨åŒºåŸŸæ ·å¼ */
        .admin-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 4rem 0;
            margin-top: 2rem;
        }

        .admin-panel {
            text-align: center;
            color: white;
        }

        .admin-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .admin-subtitle {
            font-size: 1.2rem;
            margin-bottom: 3rem;
            opacity: 0.9;
        }

        .admin-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        @media (max-width: 768px) {
            .admin-buttons {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
        }

        /* ç”¨æˆ·åŠŸèƒ½å¡ç‰‡æ ·å¼ */
        .user-function-card:hover > div {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .user-function-card > div {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .admin-btn {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 2rem;
            text-decoration: none;
            color: white;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .admin-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-decoration: none;
            color: white;
        }

        .admin-btn-icon {
            font-size: 3rem;
            flex-shrink: 0;
        }

        .admin-btn-content {
            text-align: left;
        }

        .admin-btn-content h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.3rem;
        }

        .admin-btn-content p {
            margin: 0;
            opacity: 0.8;
            font-size: 0.9rem;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            #userInfoDisplay {
                right: 10px;
                left: 10px;
                width: auto;
                min-width: auto;
            }

            .nav-dropdown-menu {
                position: static;
                opacity: 1;
                visibility: visible;
                transform: none;
                box-shadow: none;
                border: none;
                background: transparent;
                margin-top: 10px;
            }

            .nav-dropdown-link {
                padding: 8px 0;
                border-bottom: none;
                color: white;
            }

            .nav-dropdown-link:hover {
                background: rgba(255,255,255,0.1);
                transform: none;
            }

            .admin-buttons {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .admin-btn {
                flex-direction: column;
                text-align: center;
                padding: 1.5rem;
            }

            .admin-btn-content {
                text-align: center;
            }

            .admin-title {
                font-size: 2rem;
            }

            .admin-subtitle {
                font-size: 1rem;
            }
        }

        /* åˆ†ç±»å¡ç‰‡æ ·å¼ä¼˜åŒ– */
        .category-card {
            position: relative;
            overflow: hidden;
            border-radius: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* ç”Ÿæ´»éšç¬”å¡ç‰‡èƒŒæ™¯å›¾ç‰‡ */
        .essays-card {
            background-image: url('images/cec38ab95d65588029620c44d93ac499.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        /* å…¶ä»–åˆ†ç±»å¡ç‰‡çš„æ¸å˜èƒŒæ™¯ */
        .category-card:nth-child(2) {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%);
        }

        .category-card:nth-child(3) {
            background: linear-gradient(135deg, #ff7675 0%, #fd79a8 100%);
        }

        .category-card:nth-child(4) {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
        }

        .category-card:nth-child(5) {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
        }

        .category-card:nth-child(6) {
            background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
        }

        /* å¡ç‰‡å†…å®¹å®¹å™¨ */
        .card-content {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: 2rem;
            width: 100%;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            margin: 1rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* ç”Ÿæ´»éšç¬”å¡ç‰‡ç‰¹æ®Šæ ·å¼ */
        .essays-card .card-content {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(3px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* å¡ç‰‡æ ‡é¢˜æ ·å¼ */
        .card-content h4 {
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            letter-spacing: 0.5px;
        }

        /* å¡ç‰‡æè¿°æ ·å¼ */
        .card-content p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        }

        /* å¡ç‰‡é“¾æ¥æ ·å¼ */
        .card-content .category-link {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .card-content .category-link:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        /* å¡ç‰‡æ‚¬åœæ•ˆæœ */
        .category-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
        }

        .category-card:hover .card-content {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .essays-card:hover .card-content {
            background: rgba(0, 0, 0, 0.7);
            border-color: rgba(255, 255, 255, 0.5);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .card-content {
                padding: 1.5rem;
                margin: 0.5rem;
            }

            .card-content h4 {
                font-size: 1.25rem;
            }

            .card-content p {
                font-size: 0.9rem;
            }

            .card-content .category-link {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .category-card {
                min-height: 160px;
            }

            .card-content {
                padding: 1rem;
                margin: 0.25rem;
            }

            .card-content h4 {
                font-size: 1.1rem;
                margin-bottom: 0.5rem;
            }

            .card-content p {
                font-size: 0.85rem;
                margin-bottom: 1rem;
            }

            .card-content .category-link {
                padding: 0.5rem 1rem;
                font-size: 0.85rem;
            }
        }
    </style>

    <script>
        // é¦–é¡µç‰¹å®šåŠŸèƒ½ï¼ˆç™»å½•ç›¸å…³å‡½æ•°ç°åœ¨ç”±ç»„ä»¶æä¾›ï¼‰

        // ç›‘å¬é¡µçœ‰ç»„ä»¶çš„è®¤è¯çŠ¶æ€æ›´æ–°äº‹ä»¶
        window.addEventListener('authStateUpdate', function(event) {
            console.log('ğŸ”„ é¦–é¡µï¼šæ”¶åˆ°è®¤è¯çŠ¶æ€æ›´æ–°äº‹ä»¶', event.detail);
            const { user, isLoggedIn, isAdmin } = event.detail;

            if (isLoggedIn) {
                showAuthenticatedContent();
                updateAdminSection(isAdmin);
            } else {
                hideAuthenticatedContent();
                updateAdminSection(false);
            }
        });

        // updateAuthNavigation å‡½æ•°ç°åœ¨ç”±é¡µçœ‰ç»„ä»¶æä¾›
        function updateAuthNavigation() {
            console.log('ğŸ”„ é¦–é¡µ updateAuthNavigation è¢«è°ƒç”¨ï¼Œå§”æ‰˜ç»™é¡µçœ‰ç»„ä»¶...');

            // å§”æ‰˜ç»™é¡µçœ‰ç»„ä»¶å¤„ç†
            if (window.headerComponent && window.headerComponent.updateAuthNavigation) {
                window.headerComponent.updateAuthNavigation();

                // é¦–é¡µç‰¹æœ‰çš„è®¤è¯å†…å®¹å¤„ç†
                if (typeof auth !== 'undefined' && auth.currentUser) {
                    showAuthenticatedContent();
                    if (auth.isAdmin()) {
                        updateAdminSection(true);
                    } else {
                        updateAdminSection(false);
                    }
                } else {
                    hideAuthenticatedContent();
                    updateAdminSection(false);
                }
            } else {
                console.warn('âš ï¸ é¡µçœ‰ç»„ä»¶æœªåˆå§‹åŒ–ï¼Œç¨åé‡è¯•...');
                setTimeout(updateAuthNavigation, 500);
            }
        }

        function getRoleName(role) {
            const roleNames = {
                admin: 'ç®¡ç†å‘˜',
                friend: 'å¥½å‹',
                visitor: 'è®¿å®¢'
            };
            return roleNames[role] || 'è®¿å®¢';
        }

        function showAuthenticatedContent() {
            console.log('ğŸ”„ showAuthenticatedContent å‡½æ•°å¼€å§‹æ‰§è¡Œ...');

            // æ˜¾ç¤ºéœ€è¦ç™»å½•æ‰èƒ½çœ‹åˆ°çš„å†…å®¹
            const authElements = document.querySelectorAll('.auth-required');
            console.log('ğŸ” æ‰¾åˆ° .auth-required å…ƒç´ æ•°é‡:', authElements.length);

            authElements.forEach((el, index) => {
                console.log(`ğŸ”„ æ˜¾ç¤º .auth-required å…ƒç´  ${index + 1}:`, el);
                el.style.display = 'block';
            });

            if (authElements.length > 0) {
                console.log('âœ… è®¤è¯ç”¨æˆ·å†…å®¹å·²æ˜¾ç¤º');

                // æ›´æ–°æ¬¢è¿åŒºåŸŸçš„æ ‡é¢˜ï¼Œä½¿å…¶ä¸ªæ€§åŒ–æ˜¾ç¤ºç”¨æˆ·å
                updateWelcomeTitle();

                // æ›´æ–°åŸºäºæƒé™çš„å†…å®¹æ˜¾ç¤º
                updatePermissionBasedContent();
            } else {
                console.warn('âš ï¸ æ²¡æœ‰æ‰¾åˆ° .auth-required å…ƒç´ ');
            }

            // å¦‚æœæ˜¯ç®¡ç†å‘˜ï¼Œæ˜¾ç¤ºç®¡ç†å‘˜æ§åˆ¶é¢æ¿
            if (auth.isAdmin()) {
                console.log('ğŸ‘‘ ç”¨æˆ·æ˜¯ç®¡ç†å‘˜ï¼Œæ˜¾ç¤ºç®¡ç†å‘˜æ§åˆ¶é¢æ¿...');
                updateAdminSection(true);
            } else {
                console.log('ğŸ‘¤ ç”¨æˆ·ä¸æ˜¯ç®¡ç†å‘˜ï¼Œéšè—ç®¡ç†å‘˜æ§åˆ¶é¢æ¿');
                updateAdminSection(false);
            }

            // æ›´æ–°æˆ‘çš„ä½œå“æŒ‰é’®æ˜¾ç¤ºçŠ¶æ€
            updateMyWorksButton();
        }

        function hideAuthenticatedContent() {
            console.log('ğŸ”„ hideAuthenticatedContent å‡½æ•°å¼€å§‹æ‰§è¡Œ...');

            // éšè—éœ€è¦ç™»å½•çš„å†…å®¹
            const authElements = document.querySelectorAll('.auth-required');
            console.log('ğŸ” æ‰¾åˆ° .auth-required å…ƒç´ æ•°é‡:', authElements.length);

            authElements.forEach((el, index) => {
                console.log(`ğŸ”„ éšè— .auth-required å…ƒç´  ${index + 1}:`, el);
                el.style.display = 'none';
            });

            if (authElements.length > 0) {
                console.log('âœ… è®¤è¯ç”¨æˆ·å†…å®¹å·²éšè—');

                // é‡ç½®æ¬¢è¿åŒºåŸŸæ ‡é¢˜ä¸ºé»˜è®¤çŠ¶æ€
                resetWelcomeTitle();

                // é‡ç½®æƒé™ç›¸å…³å†…å®¹æ˜¾ç¤º
                resetPermissionBasedContent();
            } else {
                console.warn('âš ï¸ æ²¡æœ‰æ‰¾åˆ° .auth-required å…ƒç´ ');
            }

            // éšè—ç®¡ç†å‘˜æ§åˆ¶é¢æ¿
            updateAdminSection(false);

            // æ›´æ–°æˆ‘çš„ä½œå“æŒ‰é’®æ˜¾ç¤ºçŠ¶æ€
            updateMyWorksButton();
        }

        // æ›´æ–°æ¬¢è¿åŒºåŸŸæ ‡é¢˜ï¼Œæ˜¾ç¤ºä¸ªæ€§åŒ–ç”¨æˆ·å
        function updateWelcomeTitle() {
            const welcomeTitle = document.querySelector('#auth-section .section-title');
            if (welcomeTitle && auth.currentUser) {
                const username = auth.currentUser.username;
                welcomeTitle.textContent = `ğŸ‰ æ¬¢è¿${username}å›æ¥`;
                console.log(`âœ… æ¬¢è¿æ ‡é¢˜å·²æ›´æ–°ä¸º: æ¬¢è¿${username}å›æ¥`);
            } else {
                console.warn('âš ï¸ æ— æ³•æ›´æ–°æ¬¢è¿æ ‡é¢˜ï¼šå…ƒç´ ä¸å­˜åœ¨æˆ–ç”¨æˆ·æœªç™»å½•');
            }
        }

        // é‡ç½®æ¬¢è¿åŒºåŸŸæ ‡é¢˜ä¸ºé»˜è®¤çŠ¶æ€
        function resetWelcomeTitle() {
            const welcomeTitle = document.querySelector('#auth-section .section-title');
            if (welcomeTitle) {
                welcomeTitle.textContent = 'ğŸ‰ æ¬¢è¿ç™»å½•ç”¨æˆ·';
                console.log('âœ… æ¬¢è¿æ ‡é¢˜å·²é‡ç½®ä¸ºé»˜è®¤çŠ¶æ€');
            }
        }

        // æ›´æ–°åŸºäºæƒé™çš„å†…å®¹æ˜¾ç¤º
        function updatePermissionBasedContent() {
            console.log('ğŸ” å¼€å§‹æ›´æ–°åŸºäºæƒé™çš„å†…å®¹æ˜¾ç¤º...');

            if (!auth.currentUser) {
                console.warn('âš ï¸ ç”¨æˆ·æœªç™»å½•ï¼Œè·³è¿‡æƒé™å†…å®¹æ›´æ–°');
                return;
            }

            const userRole = auth.currentUser.role;
            const hasUploadPermission = auth.hasPermission('upload');

            console.log(`ğŸ‘¤ å½“å‰ç”¨æˆ·: ${auth.currentUser.username}, è§’è‰²: ${userRole}, ä¸Šä¼ æƒé™: ${hasUploadPermission}`);

            // è·å–ä¸Šä¼ åŠŸèƒ½ç›¸å…³å…ƒç´ 
            const uploadFunctionCard = document.getElementById('upload-function-card');
            const uploadPermissionDenied = document.getElementById('upload-permission-denied');

            if (!uploadFunctionCard || !uploadPermissionDenied) {
                console.warn('âš ï¸ ä¸Šä¼ æƒé™ç›¸å…³å…ƒç´ ä¸å­˜åœ¨');
                return;
            }

            if (hasUploadPermission) {
                // ç”¨æˆ·æœ‰ä¸Šä¼ æƒé™ï¼Œæ˜¾ç¤ºä¸Šä¼ åŠŸèƒ½å¡ç‰‡
                uploadFunctionCard.style.display = 'block';
                uploadPermissionDenied.style.display = 'none';
                console.log('âœ… ç”¨æˆ·æœ‰ä¸Šä¼ æƒé™ï¼Œæ˜¾ç¤ºåˆ›ä½œå‘å¸ƒåŠŸèƒ½');
            } else {
                // ç”¨æˆ·æ²¡æœ‰ä¸Šä¼ æƒé™ï¼Œæ˜¾ç¤ºæƒé™ä¸è¶³æç¤º
                uploadFunctionCard.style.display = 'none';
                uploadPermissionDenied.style.display = 'block';
                console.log('ğŸ”’ ç”¨æˆ·æ— ä¸Šä¼ æƒé™ï¼Œæ˜¾ç¤ºæƒé™ä¸è¶³æç¤º');
            }

            // æ›´æ–°æƒé™æç¤ºä¿¡æ¯
            updatePermissionHints(userRole, hasUploadPermission);
        }

        // æ›´æ–°æƒé™æç¤ºä¿¡æ¯
        function updatePermissionHints(userRole, hasUploadPermission) {
            const permissionDeniedCard = document.querySelector('#upload-permission-denied .user-function-card > div');

            if (!permissionDeniedCard || hasUploadPermission) {
                return;
            }

            // æ ¹æ®ç”¨æˆ·è§’è‰²æä¾›ä¸åŒçš„æç¤ºä¿¡æ¯
            let hintMessage = '';
            let upgradeInfo = '';

            switch (userRole) {
                case 'visitor':
                    hintMessage = 'éœ€è¦å¥½å‹æˆ–ç®¡ç†å‘˜æƒé™';
                    upgradeInfo = 'è”ç³»ç®¡ç†å‘˜ç”³è¯·å¥½å‹æƒé™';
                    break;
                case 'guest':
                default:
                    hintMessage = 'éœ€è¦ç™»å½•å¹¶è·å¾—æƒé™';
                    upgradeInfo = 'è¯·å…ˆç™»å½•å¹¶è”ç³»ç®¡ç†å‘˜';
                    break;
            }

            // æ›´æ–°æç¤ºæ–‡æœ¬
            const hintText = permissionDeniedCard.querySelector('p');
            if (hintText) {
                hintText.textContent = hintMessage;
            }

            // æ·»åŠ å‡çº§æç¤ºï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
            let upgradeHint = permissionDeniedCard.querySelector('.upgrade-hint');
            if (!upgradeHint && upgradeInfo) {
                upgradeHint = document.createElement('div');
                upgradeHint.className = 'upgrade-hint';
                upgradeHint.style.cssText = 'font-size: 0.8em; opacity: 0.8; margin-top: 8px; font-style: italic;';
                upgradeHint.textContent = upgradeInfo;
                permissionDeniedCard.appendChild(upgradeHint);
            } else if (upgradeHint && upgradeInfo) {
                upgradeHint.textContent = upgradeInfo;
            }

            console.log(`ğŸ’¡ æƒé™æç¤ºå·²æ›´æ–°: ${hintMessage} (${upgradeInfo})`);
        }

        // é‡ç½®æƒé™ç›¸å…³å†…å®¹æ˜¾ç¤º
        function resetPermissionBasedContent() {
            console.log('ğŸ”„ é‡ç½®æƒé™ç›¸å…³å†…å®¹æ˜¾ç¤º...');

            // éšè—æ‰€æœ‰æƒé™ç›¸å…³å…ƒç´ 
            const uploadFunctionCard = document.getElementById('upload-function-card');
            const uploadPermissionDenied = document.getElementById('upload-permission-denied');

            if (uploadFunctionCard) {
                uploadFunctionCard.style.display = 'none';
            }

            if (uploadPermissionDenied) {
                uploadPermissionDenied.style.display = 'none';
            }

            console.log('âœ… æƒé™ç›¸å…³å†…å®¹å·²é‡ç½®');
        }

        // logout å‡½æ•°ç°åœ¨ç”±é¡µçœ‰ç»„ä»¶æä¾›

        // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
        function showSuccessMessage(message) {
            showMessage(message, 'success');
        }

        // æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
        function showErrorMessage(message) {
            showMessage(message, 'error');
        }

        // é€šç”¨æ¶ˆæ¯æ˜¾ç¤ºå‡½æ•°
        function showMessage(message, type = 'success') {
            // åˆ›å»ºæ¶ˆæ¯å…ƒç´ 
            const messageDiv = document.createElement('div');
            const bgColor = type === 'success' ? '#28a745' : '#dc3545';
            const icon = type === 'success' ? 'âœ…' : 'âŒ';

            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${bgColor};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10000;
                font-weight: 500;
                animation: slideInRight 0.3s ease-out;
                max-width: 300px;
                word-wrap: break-word;
            `;
            messageDiv.innerHTML = `${icon} ${message}`;

            // æ·»åŠ åŠ¨ç”»æ ·å¼
            if (!document.getElementById('messageAnimationStyle')) {
                const style = document.createElement('style');
                style.id = 'messageAnimationStyle';
                style.textContent = `
                    @keyframes slideInRight {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOutRight {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }

            document.body.appendChild(messageDiv);

            // æ ¹æ®æ¶ˆæ¯ç±»å‹è®¾ç½®ä¸åŒçš„æ˜¾ç¤ºæ—¶é—´
            const displayTime = type === 'error' ? 5000 : 3000;

            setTimeout(() => {
                messageDiv.style.animation = 'slideOutRight 0.3s ease-in';
                setTimeout(() => {
                    if (messageDiv.parentNode) {
                        messageDiv.parentNode.removeChild(messageDiv);
                    }
                }, 300);
            }, displayTime);
        }

        // æ˜¾ç¤ºç®¡ç†å‘˜æ¬¢è¿ä¿¡æ¯
        function showAdminWelcome() {
            const welcomeDiv = document.createElement('div');
            welcomeDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 30px;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 10001;
                text-align: center;
                max-width: 400px;
                animation: fadeInScale 0.5s ease-out;
            `;

            welcomeDiv.innerHTML = `
                <h3 style="margin: 0 0 15px 0; font-size: 1.5em;">ğŸ‰ ç®¡ç†å‘˜ç™»å½•æˆåŠŸ</h3>
                <p style="margin: 0 0 20px 0; opacity: 0.9;">æ¬¢è¿å›æ¥ï¼Œ${auth.currentUser.username}ï¼</p>
                <p style="margin: 0 0 20px 0; font-size: 0.9em; opacity: 0.8;">æ‚¨ç°åœ¨å¯ä»¥è®¿é—®æ‰€æœ‰ç®¡ç†åŠŸèƒ½</p>
                <button onclick="closeAdminWelcome()" style="
                    background: rgba(255,255,255,0.2);
                    border: 1px solid rgba(255,255,255,0.3);
                    color: white;
                    padding: 8px 20px;
                    border-radius: 6px;
                    cursor: pointer;
                    font-size: 0.9em;
                ">ç¡®å®š</button>
            `;

            // æ·»åŠ åŠ¨ç”»æ ·å¼
            if (!document.getElementById('adminWelcomeStyle')) {
                const style = document.createElement('style');
                style.id = 'adminWelcomeStyle';
                style.textContent = `
                    @keyframes fadeInScale {
                        from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
                        to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                    }
                `;
                document.head.appendChild(style);
            }

            welcomeDiv.id = 'adminWelcomeDiv';
            document.body.appendChild(welcomeDiv);

            // æ·»åŠ èƒŒæ™¯é®ç½©
            const overlay = document.createElement('div');
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                z-index: 10000;
            `;
            overlay.id = 'adminWelcomeOverlay';
            overlay.onclick = closeAdminWelcome;
            document.body.appendChild(overlay);
        }

        // å…³é—­ç®¡ç†å‘˜æ¬¢è¿ä¿¡æ¯
        function closeAdminWelcome() {
            const welcomeDiv = document.getElementById('adminWelcomeDiv');
            const overlay = document.getElementById('adminWelcomeOverlay');

            if (welcomeDiv) welcomeDiv.remove();
            if (overlay) overlay.remove();
        }

        // æ›´æ–°ç®¡ç†å‘˜åŒºåŸŸæ˜¾ç¤º
        function updateAdminSection(show) {
            const adminSection = document.getElementById('adminSection');
            if (!adminSection) {
                console.warn('âš ï¸ æœªæ‰¾åˆ°ç®¡ç†å‘˜åŒºåŸŸå…ƒç´ ');
                return;
            }

            if (show) {
                console.log('ğŸ‘‘ æ˜¾ç¤ºç®¡ç†å‘˜æ§åˆ¶é¢æ¿');
                adminSection.style.display = 'block';
            } else {
                console.log('ğŸ”’ éšè—ç®¡ç†å‘˜æ§åˆ¶é¢æ¿');
                adminSection.style.display = 'none';
            }
        }

        // å°†å‡½æ•°æ·»åŠ åˆ°windowå¯¹è±¡ï¼Œä¾›é¡µçœ‰ç»„ä»¶è°ƒç”¨
        window.updateAdminSection = updateAdminSection;
        window.showAuthenticatedContent = showAuthenticatedContent;
        window.hideAuthenticatedContent = hideAuthenticatedContent;
        window.updateAuthNavigation = updateAuthNavigation;
        window.updateWelcomeTitle = updateWelcomeTitle;
        window.resetWelcomeTitle = resetWelcomeTitle;
        window.updatePermissionBasedContent = updatePermissionBasedContent;
        window.resetPermissionBasedContent = resetPermissionBasedContent;

        // ç®¡ç†å‘˜åŠŸèƒ½å‡½æ•°
        function showAdminDashboard() {
            // è·å–ç³»ç»Ÿç»Ÿè®¡æ•°æ®
            const stats = {
                totalUsers: JSON.parse(localStorage.getItem('users') || '[]').length,
                totalEssays: JSON.parse(localStorage.getItem('essays') || '[]').length,
                totalPoetry: JSON.parse(localStorage.getItem('poetry') || '[]').length,
                totalWorks: Object.keys(localStorage).filter(key => key.startsWith('work_')).length,
                storageUsed: JSON.stringify(localStorage).length,
                lastLogin: new Date().toLocaleString()
            };

            // è·å–æ“ä½œæ—¥å¿—
            let recentLogs = [];
            if (typeof adminLogger !== 'undefined') {
                recentLogs = adminLogger.getLogs().slice(0, 3);
            }

            let dashboardText = `ğŸ“Š ç®¡ç†ä»ªè¡¨æ¿\n\n`;
            dashboardText += `=== ç³»ç»Ÿç»Ÿè®¡ ===\n`;
            dashboardText += `ğŸ‘¥ æ³¨å†Œç”¨æˆ·: ${stats.totalUsers} äºº\n`;
            dashboardText += `ğŸ“ ç”Ÿæ´»éšç¬”: ${stats.totalEssays} ç¯‡\n`;
            dashboardText += `ğŸŒ¸ è¯—æ­Œä½œå“: ${stats.totalPoetry} é¦–\n`;
            dashboardText += `ğŸ“‚ æ€»ä½œå“æ•°: ${stats.totalWorks} ä¸ª\n`;
            dashboardText += `ğŸ’¾ å­˜å‚¨ä½¿ç”¨: ${(stats.storageUsed / 1024).toFixed(2)} KB\n\n`;

            dashboardText += `=== æœ€è¿‘æ“ä½œ ===\n`;
            if (recentLogs.length === 0) {
                dashboardText += `æš‚æ— æ“ä½œè®°å½•\n`;
            } else {
                recentLogs.forEach((log, index) => {
                    const date = new Date(log.timestamp).toLocaleString();
                    dashboardText += `${index + 1}. [${date}] ${log.operation || log.action}\n`;
                });
            }

            dashboardText += `\nğŸ’¡ æç¤º: è®¿é—®"ç”¨æˆ·ç®¡ç†"å’Œ"ç³»ç»Ÿç®¡ç†"é¡µé¢æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯`;
            alert(dashboardText);
        }

        function showOperationLogs() {
            if (typeof adminLogger !== 'undefined') {
                const logs = adminLogger.getLogs().slice(0, 5);
                let logText = 'ğŸ“‹ æœ€è¿‘5æ¡æ“ä½œæ—¥å¿—:\n\n';

                if (logs.length === 0) {
                    logText += 'æš‚æ— æ“ä½œæ—¥å¿—';
                } else {
                    logs.forEach((log, index) => {
                        logText += `${index + 1}. [${new Date(log.timestamp).toLocaleString()}]\n`;
                        logText += `   æ“ä½œå‘˜: ${log.operator}\n`;
                        logText += `   æ“ä½œ: ${log.operation}\n`;
                        if (log.details && Object.keys(log.details).length > 0) {
                            logText += `   è¯¦æƒ…: ${JSON.stringify(log.details)}\n`;
                        }
                        logText += '\n';
                    });
                }

                logText += '\nç‚¹å‡»"ç”¨æˆ·ç®¡ç†"æŸ¥çœ‹å®Œæ•´æ—¥å¿—';
                alert(logText);
            } else {
                alert('æ“ä½œæ—¥å¿—ç³»ç»ŸæœªåŠ è½½\n\nè¯·ç¡®ä¿ admin-logger.js å·²æ­£ç¡®åŠ è½½');
            }
        }

        // æ˜¾ç¤ºçœŸå®ç³»ç»Ÿç»Ÿè®¡
        async function showStats() {
            try {
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                const adminWelcome = document.querySelector('.admin-welcome');
                if (adminWelcome) {
                    adminWelcome.innerHTML = `
                        <h4 style="margin-bottom: 10px;">ğŸ“Š ç³»ç»Ÿç»Ÿè®¡æ¦‚è§ˆ</h4>
                        <p style="opacity: 0.9; margin-bottom: 15px;">æ­£åœ¨åŠ è½½å®æ—¶æ•°æ®...</p>
                        <div style="text-align: center; padding: 20px;">
                            <div style="width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.3); border-top: 4px solid white; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div>
                        </div>
                    `;
                }

                // è·å–çœŸå®ç»Ÿè®¡æ•°æ®
                const stats = await window.systemStatsManager.getRealSystemStats();
                const displayStats = window.systemStatsManager.formatStatsForDisplay(stats);

                const statsHtml = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 20px;">
                        <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                            <div style="font-size: 2em; font-weight: bold;">${displayStats.summary.totalUsers}</div>
                            <div style="font-size: 0.9em; opacity: 0.8;">æ³¨å†Œç”¨æˆ·</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                            <div style="font-size: 2em; font-weight: bold;">${displayStats.summary.totalWorks}</div>
                            <div style="font-size: 0.9em; opacity: 0.8;">å‘å¸ƒä½œå“</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                            <div style="font-size: 2em; font-weight: bold;">${displayStats.summary.todayActive}</div>
                            <div style="font-size: 0.9em; opacity: 0.8;">ä»Šæ—¥æ´»è·ƒ</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                            <div style="font-size: 2em; font-weight: bold;">${stats.activity.onlineUsers}</div>
                            <div style="font-size: 0.9em; opacity: 0.8;">åœ¨çº¿ç”¨æˆ·</div>
                        </div>
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 8px; font-size: 0.9em; line-height: 1.6;">
                        <div><strong>è¯¦ç»†ç»Ÿè®¡:</strong></div>
                        <div>â€¢ ${displayStats.detailed.users}</div>
                        <div>â€¢ ${displayStats.detailed.works}</div>
                        <div>â€¢ ${displayStats.detailed.activity}</div>
                        <div>â€¢ ${displayStats.detailed.storage}</div>
                        <div style="margin-top: 10px; opacity: 0.7;">æœ€åæ›´æ–°: ${new Date().toLocaleString()}</div>
                    </div>
                `;

                showSuccessMessage('ç³»ç»Ÿç»Ÿè®¡æ•°æ®å·²æ›´æ–°');

                // æ›´æ–°ç®¡ç†å‘˜æ¬¢è¿åŒºåŸŸ
                if (adminWelcome) {
                    adminWelcome.innerHTML = `
                        <h4 style="margin-bottom: 10px;">ğŸ“Š ç³»ç»Ÿç»Ÿè®¡æ¦‚è§ˆ</h4>
                        <p style="opacity: 0.9; margin-bottom: 15px;">å®æ—¶ç³»ç»Ÿæ•°æ®</p>
                        ${statsHtml}
                    `;
                }

            } catch (error) {
                console.error('è·å–ç³»ç»Ÿç»Ÿè®¡å¤±è´¥:', error);
                showErrorMessage('è·å–ç»Ÿè®¡æ•°æ®å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');

                // æ˜¾ç¤ºé”™è¯¯çŠ¶æ€
                const adminWelcome = document.querySelector('.admin-welcome');
                if (adminWelcome) {
                    adminWelcome.innerHTML = `
                        <h4 style="margin-bottom: 10px;">ğŸ“Š ç³»ç»Ÿç»Ÿè®¡æ¦‚è§ˆ</h4>
                        <p style="opacity: 0.9; margin-bottom: 15px; color: #ffcccb;">æ•°æ®åŠ è½½å¤±è´¥</p>
                        <button onclick="showStats()" style="background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 10px 20px; border-radius: 6px; cursor: pointer;">é‡æ–°åŠ è½½</button>
                    `;
                }
            }
        }

        // ç™»å½•è¡¨å•å¤„ç†å·²ç§»è‡³é¡µçœ‰ç»„ä»¶ï¼Œé¿å…é‡å¤å¤„ç†å†²çª
        // é¦–é¡µç°åœ¨ä½¿ç”¨é¡µçœ‰ç»„ä»¶çš„ç»Ÿä¸€ç™»å½•ç³»ç»Ÿ
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸ  é¦–é¡µï¼šå¼€å§‹åˆå§‹åŒ–...');

            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                // æ£€æŸ¥é¡µçœ‰ç»„ä»¶æ˜¯å¦å·²å¤„ç†ç™»å½•è¡¨å•
                if (loginForm.dataset.headerBound === 'true') {
                    console.log('âœ… é¦–é¡µï¼šé¡µçœ‰ç»„ä»¶å·²å¤„ç†ç™»å½•è¡¨å•ï¼Œè·³è¿‡é‡å¤ç»‘å®š');
                } else {
                    console.log('âš ï¸ é¦–é¡µï¼šé¡µçœ‰ç»„ä»¶æœªå¤„ç†ç™»å½•è¡¨å•ï¼Œç­‰å¾…é¡µçœ‰ç»„ä»¶åˆå§‹åŒ–');
                    // ç­‰å¾…é¡µçœ‰ç»„ä»¶å¤„ç†ç™»å½•è¡¨å•
                    let checkCount = 0;
                    const checkInterval = setInterval(() => {
                        checkCount++;
                        if (loginForm.dataset.headerBound === 'true') {
                            console.log('âœ… é¦–é¡µï¼šé¡µçœ‰ç»„ä»¶ç™»å½•å¤„ç†å·²å°±ç»ª');
                            clearInterval(checkInterval);
                        } else if (checkCount > 50) { // 5ç§’è¶…æ—¶
                            console.warn('âš ï¸ é¦–é¡µï¼šé¡µçœ‰ç»„ä»¶ç™»å½•å¤„ç†è¶…æ—¶ï¼Œå¯èƒ½å­˜åœ¨é—®é¢˜');
                            clearInterval(checkInterval);
                        }
                    }, 100);
                }

                // åŸæœ‰çš„é‡å¤ç™»å½•å¤„ç†å·²æ³¨é‡Šï¼Œé¿å…ä¸é¡µçœ‰ç»„ä»¶å†²çª
                /*
                loginForm.addEventListener('submit', async (e) => {
                    // åŸæœ‰çš„ç™»å½•å¤„ç†é€»è¾‘å·²æ³¨é‡Šï¼Œç°åœ¨ç”±é¡µçœ‰ç»„ä»¶ç»Ÿä¸€å¤„ç†
                    // è¿™é¿å…äº†åŒé‡ç™»å½•å¤„ç†çš„å†²çªé—®é¢˜

                    e.preventDefault();

                    // æ£€æŸ¥authå¯¹è±¡æ˜¯å¦å¯ç”¨
                    if (typeof auth === 'undefined') {
                        alert('ç³»ç»Ÿæ­£åœ¨åˆå§‹åŒ–ï¼Œè¯·ç¨åå†è¯•');
                        return;
                    }

                    const username = document.getElementById('loginUsername').value;
                    const password = document.getElementById('loginPassword').value;

                    try {
                        console.log('ğŸ” å¼€å§‹ç™»å½•æµç¨‹...');
                        console.log('ğŸ“ è¾“å…¥çš„ç”¨æˆ·å:', username);

                        // æ˜¾ç¤ºç™»å½•ä¸­çŠ¶æ€
                        const submitBtn = e.target.querySelector('button[type="submit"]');
                        const originalText = submitBtn.textContent;
                        submitBtn.textContent = 'ç™»å½•ä¸­...';
                        submitBtn.disabled = true;

                        const result = await auth.login(username, password);
                        console.log('ğŸ” ç™»å½•ç»“æœ:', result);

                        // æ¢å¤æŒ‰é’®çŠ¶æ€
                        submitBtn.textContent = originalText;
                        submitBtn.disabled = false;

                        if (result) {
                            console.log('âœ… ç™»å½•æˆåŠŸï¼Œå¼€å§‹æ›´æ–°UI...');
                            console.log('ğŸ‘¤ å½“å‰ç”¨æˆ·:', auth.currentUser);

                            // æ­¥éª¤1ï¼šå…³é—­ç™»å½•æ¨¡æ€æ¡†
                            console.log('ğŸ”„ æ­¥éª¤1ï¼šå…³é—­ç™»å½•æ¨¡æ€æ¡†...');
                            try {
                                closeLoginModal();
                                console.log('âœ… ç™»å½•æ¨¡æ€æ¡†å·²å…³é—­');
                            } catch (error) {
                                console.error('âŒ å…³é—­æ¨¡æ€æ¡†å¤±è´¥:', error);
                            }

                            // æ­¥éª¤2ï¼šç«‹å³æ›´æ–°å¯¼èˆªçŠ¶æ€ï¼ˆä½¿ç”¨setTimeoutç¡®ä¿DOMæ›´æ–°ï¼‰
                            console.log('ğŸ”„ æ­¥éª¤2ï¼šæ›´æ–°å¯¼èˆªçŠ¶æ€...');
                            setTimeout(() => {
                                try {
                                    updateAuthNavigation();
                                    console.log('âœ… å¯¼èˆªçŠ¶æ€å·²æ›´æ–°');
                                } catch (error) {
                                    console.error('âŒ æ›´æ–°å¯¼èˆªçŠ¶æ€å¤±è´¥:', error);
                                }
                            }, 100);

                            // æ­¥éª¤3ï¼šæ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                            console.log('ğŸ”„ æ­¥éª¤3ï¼šæ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯...');
                            setTimeout(() => {
                                try {
                                    showSuccessMessage('ç™»å½•æˆåŠŸï¼æ¬¢è¿å›æ¥ï¼Œ' + auth.currentUser.username);
                                    console.log('âœ… æˆåŠŸæ¶ˆæ¯å·²æ˜¾ç¤º');
                                } catch (error) {
                                    console.error('âŒ æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯å¤±è´¥:', error);
                                }
                            }, 200);

                            // æ­¥éª¤4ï¼šç®¡ç†å‘˜ç‰¹æ®Šå¤„ç†
                            if (auth.isAdmin()) {
                                console.log('ğŸ”„ æ­¥éª¤4ï¼šæ˜¾ç¤ºç®¡ç†å‘˜æ¬¢è¿ä¿¡æ¯...');
                                setTimeout(() => {
                                    try {
                                        showAdminWelcome();
                                        console.log('âœ… ç®¡ç†å‘˜æ¬¢è¿ä¿¡æ¯å·²æ˜¾ç¤º');
                                    } catch (error) {
                                        console.error('âŒ æ˜¾ç¤ºç®¡ç†å‘˜æ¬¢è¿ä¿¡æ¯å¤±è´¥:', error);
                                    }
                                }, 1500);
                            }

                            console.log('ğŸ‰ ç™»å½•æµç¨‹å®Œæˆï¼');
                        } else {
                            console.error('âŒ ç™»å½•è¿”å›false');
                            alert('ç™»å½•å¤±è´¥ï¼šæœªçŸ¥é”™è¯¯');
                        }
                    } catch (error) {
                        console.error('âŒ ç™»å½•å¼‚å¸¸:', error);

                        // æ¢å¤æŒ‰é’®çŠ¶æ€
                        const submitBtn = e.target.querySelector('button[type="submit"]');
                        if (submitBtn) {
                            submitBtn.textContent = 'ç™»å½•';
                            submitBtn.disabled = false;
                        }

                        // æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æ¶ˆæ¯
                        let errorMessage = 'ç™»å½•å¤±è´¥';
                        if (error.message.includes('ç”¨æˆ·ä¸å­˜åœ¨')) {
                            errorMessage = 'ç”¨æˆ·åä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥è¾“å…¥';
                        } else if (error.message.includes('å¯†ç é”™è¯¯')) {
                            errorMessage = 'å¯†ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥';
                        } else if (error.message.includes('Firebase')) {
                            errorMessage = 'ç½‘ç»œè¿æ¥é—®é¢˜ï¼Œè¯·ç¨åé‡è¯•';
                        } else {
                            errorMessage = `ç™»å½•å¤±è´¥: ${error.message}`;
                        }

                        showErrorMessage(errorMessage);
                    }
                    */
                // æ³¨é‡Šçš„ç™»å½•å¤„ç†ä»£ç ç»“æŸ
            }

            // åˆå§‹åŒ–è®¤è¯çŠ¶æ€ - ç­‰å¾…authæ¨¡å—å®Œå…¨åŠ è½½
            console.log('ğŸ”§ å¼€å§‹åˆå§‹åŒ–è®¤è¯çŠ¶æ€...');
            let initAttempts = 0;
            const maxAttempts = 10;

            const initAuth = () => {
                initAttempts++;
                console.log(`ğŸ”§ è®¤è¯åˆå§‹åŒ–å°è¯• ${initAttempts}/${maxAttempts}...`);

                if (typeof auth !== 'undefined') {
                    console.log('âœ… Authå¯¹è±¡å¯ç”¨ï¼Œå¼€å§‹æ›´æ–°å¯¼èˆª...');
                    updateAuthNavigation();
                } else if (initAttempts < maxAttempts) {
                    console.log('âš ï¸ Authå¯¹è±¡å°šæœªå¯ç”¨ï¼Œ500msåé‡è¯•...');
                    setTimeout(initAuth, 500);
                } else {
                    console.error('âŒ Authå¯¹è±¡åˆå§‹åŒ–è¶…æ—¶');
                }
            };

            // å»¶è¿Ÿå¯åŠ¨ä»¥ç¡®ä¿æ‰€æœ‰è„šæœ¬éƒ½å·²åŠ è½½
            setTimeout(initAuth, 100);
        });

        // æ¨¡æ€æ¡†ç‚¹å‡»å¤–éƒ¨å…³é—­
        window.addEventListener('click', (event) => {
            const loginModal = document.getElementById('loginModal');
            if (event.target === loginModal) {
                closeLoginModal();
            }
        });

        // å¯¼èˆªåˆ°æˆ‘çš„ä½œå“é¡µé¢
        function navigateToMyWorks() {
            console.log('ğŸ”— å¯¼èˆªåˆ°æˆ‘çš„ä½œå“é¡µé¢');

            if (!auth || !auth.currentUser) {
                console.log('âŒ ç”¨æˆ·æœªç™»å½•ï¼Œæ˜¾ç¤ºç™»å½•æç¤º');
                alert('è¯·å…ˆç™»å½•ä»¥æŸ¥çœ‹æ‚¨çš„ä½œå“');

                // æ˜¾ç¤ºç™»å½•æ¨¡æ€æ¡†
                if (typeof showLoginModal === 'function') {
                    showLoginModal();
                } else if (window.headerFooterComponent && typeof window.headerFooterComponent.showLoginModal === 'function') {
                    window.headerFooterComponent.showLoginModal();
                }
                return;
            }

            console.log('âœ… ç”¨æˆ·å·²ç™»å½•ï¼Œè·³è½¬åˆ°æˆ‘çš„ä½œå“é¡µé¢');
            window.location.href = 'my-works.html';
        }

        // æ›´æ–°æˆ‘çš„ä½œå“æŒ‰é’®æ˜¾ç¤ºçŠ¶æ€
        function updateMyWorksButton() {
            const myWorksBtn = document.getElementById('myWorksBtn');
            if (!myWorksBtn) return;

            if (auth && auth.currentUser) {
                console.log('ğŸ‘¤ ç”¨æˆ·å·²ç™»å½•ï¼Œæ˜¾ç¤ºæˆ‘çš„ä½œå“æŒ‰é’®');
                myWorksBtn.style.display = 'inline-block';
            } else {
                console.log('ğŸ”’ ç”¨æˆ·æœªç™»å½•ï¼Œéšè—æˆ‘çš„ä½œå“æŒ‰é’®');
                myWorksBtn.style.display = 'none';
            }
        }

        // ç”¨æˆ·åŠŸèƒ½å‡½æ•°
        function showMyWorks() {
            if (!auth.currentUser) {
                alert('è¯·å…ˆç™»å½•');
                return;
            }

            // è·å–å½“å‰ç”¨æˆ·çš„ä½œå“
            const userWorks = [];
            const allKeys = Object.keys(localStorage);

            allKeys.forEach(key => {
                if (key.startsWith('work_')) {
                    try {
                        const workData = JSON.parse(localStorage.getItem(key));
                        if (workData.uploadedBy === auth.currentUser.username) {
                            userWorks.push(workData);
                        }
                    } catch (error) {
                        console.warn('è§£æä½œå“æ•°æ®å¤±è´¥:', key);
                    }
                }
            });

            if (userWorks.length === 0) {
                alert('æ‚¨è¿˜æ²¡æœ‰å‘å¸ƒä»»ä½•ä½œå“\n\nç‚¹å‡»"åˆ›ä½œå‘å¸ƒ"å¼€å§‹åˆ›ä½œå§ï¼');
                return;
            }

            let worksText = `ğŸ“‚ æˆ‘çš„ä½œå“ (${userWorks.length} ä¸ª)\n\n`;
            userWorks.slice(0, 10).forEach((work, index) => {
                const date = new Date(work.uploadTime).toLocaleDateString();
                const visibility = work.permissions?.visibility || 'æœªè®¾ç½®';
                worksText += `${index + 1}. ${work.title}\n`;
                worksText += `   ç±»å‹: ${work.categoryName || work.mainCategory}\n`;
                worksText += `   å‘å¸ƒ: ${date} | å¯è§æ€§: ${visibility}\n\n`;
            });

            if (userWorks.length > 10) {
                worksText += `... è¿˜æœ‰ ${userWorks.length - 10} ä¸ªä½œå“\n\n`;
            }

            worksText += `ğŸ’¡ æç¤º: å‰å¾€"ç³»ç»Ÿç®¡ç†"é¡µé¢å¯ä»¥ç¼–è¾‘ä½œå“æƒé™`;
            alert(worksText);
        }

        function showAccountSettings() {
            if (!auth.currentUser) {
                alert('è¯·å…ˆç™»å½•');
                return;
            }

            const user = auth.currentUser;
            let settingsText = `âš™ï¸ è´¦æˆ·è®¾ç½®\n\n`;
            settingsText += `ç”¨æˆ·å: ${user.username}\n`;
            settingsText += `è§’è‰²: ${getRoleName(user.role)}\n`;
            settingsText += `æ³¨å†Œæ—¶é—´: ${new Date(user.registeredAt).toLocaleDateString()}\n\n`;

            settingsText += `å¯ç”¨æ“ä½œ:\n`;
            settingsText += `â€¢ ä¿®æ”¹å¯†ç : å‰å¾€"ç³»ç»Ÿç®¡ç†"é¡µé¢\n`;
            settingsText += `â€¢ ç®¡ç†ä½œå“: ç‚¹å‡»"æˆ‘çš„ä½œå“"æŸ¥çœ‹\n`;
            settingsText += `â€¢ æƒé™è®¾ç½®: åœ¨ä½œå“è¯¦æƒ…é¡µè®¾ç½®å¯è§æ€§\n\n`;

            if (auth.isAdmin && auth.isAdmin()) {
                settingsText += `ğŸ”§ ç®¡ç†å‘˜ç‰¹æƒ:\n`;
                settingsText += `â€¢ ç”¨æˆ·ç®¡ç†: ç®¡ç†æ‰€æœ‰ç”¨æˆ·è´¦æˆ·\n`;
                settingsText += `â€¢ ç³»ç»Ÿç®¡ç†: é…ç½®ç³»ç»Ÿè®¾ç½®\n`;
                settingsText += `â€¢ ç®¡ç†ä»ªè¡¨æ¿: æŸ¥çœ‹ç³»ç»Ÿç»Ÿè®¡\n\n`;
            }

            settingsText += `ğŸ’¡ æç¤º: å¦‚éœ€ä¿®æ”¹ç”¨æˆ·åæˆ–è§’è‰²ï¼Œè¯·è”ç³»ç®¡ç†å‘˜`;
            alert(settingsText);
        }
    </script>
</body>
</html>
